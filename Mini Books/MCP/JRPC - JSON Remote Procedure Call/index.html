
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../JavaScript/06.%20Higher%20Order%20Loops%20and%20Array%20Iteration/">
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>JRPC - JSON Remote Procedure Call - Paritosh's Tech Universe</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction-to-rpc-and-json-rpc" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Paritosh&#39;s Tech Universe" class="md-header__button md-logo" aria-label="Paritosh's Tech Universe" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Paritosh's Tech Universe
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              JRPC - JSON Remote Procedure Call
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../Pydantic/Introduction/" class="md-tabs__link">
          
  
  
    
  
  Mini Books

        </a>
      </li>
    
  

    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Paritosh&#39;s Tech Universe" class="md-nav__button md-logo" aria-label="Paritosh's Tech Universe" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Paritosh's Tech Universe
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Mini Books
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Mini Books
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Books
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Books
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pydantic
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            Pydantic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Pydantic/Introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Pydantic/Chapter%201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Pydantic/Chapter%202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Transformers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_2">
            <span class="md-nav__icon md-icon"></span>
            Transformers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Transformers/Self%20Attention/Self%20Attention/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Self Attention
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kubernetes/Why%20Kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Why Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kubernetes/Pod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kubernetes/Kubernetes%20Architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kubernetes/What%20is%20deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What is deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Kubernetes/Service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Service
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4" id="__nav_2_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    JavaScript
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4">
            <span class="md-nav__icon md-icon"></span>
            JavaScript
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript/01.%20Immediately%20Invoked%20Function%20Expressions%20%28IIFE%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Immediately Invoked Function Expressions (IIFE)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript/02.%20Call%20Stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Call Stack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript/03.%20Control%20Flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Flow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript/04.%20For%20Loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    For Loop
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript/05.%20while%20and%20do-while%20Loops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    While and do-while Loops
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript/06.%20Higher%20Order%20Loops%20and%20Array%20Iteration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Higher Order Loops
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_5" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1_5" id="__nav_2_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    MCP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1_5">
            <span class="md-nav__icon md-icon"></span>
            MCP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    JRPC - JSON Remote Procedure Call
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    JRPC - JSON Remote Procedure Call
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction-to-rpc-and-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction to RPC and JSON-RPC
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction to RPC and JSON-RPC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-essence-of-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      The Essence of RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-json" class="md-nav__link">
    <span class="md-ellipsis">
      Why JSON?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-rpc-20-the-modern-standard" class="md-nav__link">
    <span class="md-ellipsis">
      JSON-RPC 2.0 — The Modern Standard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateless-and-transport-agnostic" class="md-nav__link">
    <span class="md-ellipsis">
      Stateless and Transport-Agnostic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-analogy" class="md-nav__link">
    <span class="md-ellipsis">
      Example Analogy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-in-code-context" class="md-nav__link">
    <span class="md-ellipsis">
      Example in Code Context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evolution-of-the-specification-10-20" class="md-nav__link">
    <span class="md-ellipsis">
      Evolution of the Specification (1.0 → 2.0)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Evolution of the Specification (1.0 → 2.0)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-rpc-10-a-minimal-beginning" class="md-nav__link">
    <span class="md-ellipsis">
      JSON-RPC 1.0 — A Minimal Beginning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-rpc-20-stabilization-and-formalization" class="md-nav__link">
    <span class="md-ellipsis">
      JSON-RPC 2.0 — Stabilization and Formalization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-batch-request-in-20" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Batch Request in 2.0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-20-became-the-standard" class="md-nav__link">
    <span class="md-ellipsis">
      Why 2.0 Became the Standard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_1" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-message-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Core Message Structures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Message Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-three-fundamental-objects" class="md-nav__link">
    <span class="md-ellipsis">
      The Three Fundamental Objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-the-request-object" class="md-nav__link">
    <span class="md-ellipsis">
      1. The Request Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-the-response-object" class="md-nav__link">
    <span class="md-ellipsis">
      2. The Response Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-the-error-object" class="md-nav__link">
    <span class="md-ellipsis">
      3. The Error Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-putting-it-together" class="md-nav__link">
    <span class="md-ellipsis">
      4. Putting It Together
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-why-this-design-matters" class="md-nav__link">
    <span class="md-ellipsis">
      5. Why This Design Matters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_2" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requests-in-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      Requests in JSON-RPC
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Requests in JSON-RPC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-standard-requests" class="md-nav__link">
    <span class="md-ellipsis">
      1. Standard Requests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-positional-vs-named-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      2. Positional vs Named Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-notifications-fire-and-forget" class="md-nav__link">
    <span class="md-ellipsis">
      3. Notifications — Fire-and-Forget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-batch-requests" class="md-nav__link">
    <span class="md-ellipsis">
      4. Batch Requests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-why-batch-and-notification-matter-in-modern-systems" class="md-nav__link">
    <span class="md-ellipsis">
      5. Why Batch and Notification Matter in Modern Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_3" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#responses-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Responses &amp; Error Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Responses &amp; Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-the-successful-response" class="md-nav__link">
    <span class="md-ellipsis">
      1. The Successful Response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-the-error-response" class="md-nav__link">
    <span class="md-ellipsis">
      2. The Error Response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anatomy-of-the-error-object" class="md-nav__link">
    <span class="md-ellipsis">
      3. Anatomy of the Error Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-graceful-degradation" class="md-nav__link">
    <span class="md-ellipsis">
      4. Graceful Degradation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-batch-responses" class="md-nav__link">
    <span class="md-ellipsis">
      5. Batch Responses
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-invalid-requests" class="md-nav__link">
    <span class="md-ellipsis">
      6. Invalid Requests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-mapping-application-errors" class="md-nav__link">
    <span class="md-ellipsis">
      7. Mapping Application Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_4" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concurrency-state" class="md-nav__link">
    <span class="md-ellipsis">
      Concurrency &amp; State
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concurrency &amp; State">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-stateless-by-design" class="md-nav__link">
    <span class="md-ellipsis">
      1. Stateless by Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-the-role-of-id-in-concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      2. The Role of id in Concurrency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-asynchronous-processing" class="md-nav__link">
    <span class="md-ellipsis">
      3. Asynchronous Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-implications-for-distributed-systems" class="md-nav__link">
    <span class="md-ellipsis">
      4. Implications for Distributed Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-introducing-optional-context-or-session" class="md-nav__link">
    <span class="md-ellipsis">
      5. Introducing Optional Context or Session
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-observability-in-concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      6. Observability in Concurrency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_5" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transport-layer-integrations" class="md-nav__link">
    <span class="md-ellipsis">
      Transport Layer Integrations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Transport Layer Integrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-http-the-most-common-transport" class="md-nav__link">
    <span class="md-ellipsis">
      1. HTTP — The Most Common Transport
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-websockets-bi-directional-persistent-connection" class="md-nav__link">
    <span class="md-ellipsis">
      2. WebSockets — Bi-Directional, Persistent Connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-server-sent-events-sse-for-streaming-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      3. Server-Sent Events (SSE) — For Streaming Outputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-local-ipc-stdio-lightweight-inter-process-communication" class="md-nav__link">
    <span class="md-ellipsis">
      4. Local IPC / STDIO — Lightweight Inter-Process Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-hybrid-and-gateway-transports" class="md-nav__link">
    <span class="md-ellipsis">
      5. Hybrid and Gateway Transports
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-observability-across-transports" class="md-nav__link">
    <span class="md-ellipsis">
      6. Observability Across Transports
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_6" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Security Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-message-validation" class="md-nav__link">
    <span class="md-ellipsis">
      1. Message Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-authentication-authorization" class="md-nav__link">
    <span class="md-ellipsis">
      2. Authentication &amp; Authorization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-message-signing-integrity" class="md-nav__link">
    <span class="md-ellipsis">
      3. Message Signing &amp; Integrity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-preventing-injection-attacks" class="md-nav__link">
    <span class="md-ellipsis">
      4. Preventing Injection Attacks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-replay-attack-protection" class="md-nav__link">
    <span class="md-ellipsis">
      5. Replay Attack Protection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-transport-level-security" class="md-nav__link">
    <span class="md-ellipsis">
      6. Transport-Level Security
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-error-hygiene" class="md-nav__link">
    <span class="md-ellipsis">
      7. Error Hygiene
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-access-control-between-agents" class="md-nav__link">
    <span class="md-ellipsis">
      8. Access Control Between Agents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_7" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparison-with-alternatives" class="md-nav__link">
    <span class="md-ellipsis">
      Comparison with Alternatives
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Comparison with Alternatives">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-rest-vs-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      1. REST vs JSON-RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-grpc-vs-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      2. gRPC vs JSON-RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-soap-vs-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      3. SOAP vs JSON-RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-graphql-vs-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      4. GraphQL vs JSON-RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-when-to-choose-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      5. When to Choose JSON-RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_8" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hands-on-topics" class="md-nav__link">
    <span class="md-ellipsis">
      Hands-On Topics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hands-On Topics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-minimal-server-fastapi-python" class="md-nav__link">
    <span class="md-ellipsis">
      1) Minimal Server (FastAPI, Python)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-minimal-client-python" class="md-nav__link">
    <span class="md-ellipsis">
      2) Minimal Client (Python)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-batch-and-notifications" class="md-nav__link">
    <span class="md-ellipsis">
      3) Batch and Notifications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-structured-error-mapping-llm-example" class="md-nav__link">
    <span class="md-ellipsis">
      4) Structured Error Mapping (LLM Example)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-streaming-with-sse-server" class="md-nav__link">
    <span class="md-ellipsis">
      5) Streaming with SSE (Server)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-websocket-variant-bi-directional" class="md-nav__link">
    <span class="md-ellipsis">
      6) WebSocket Variant (Bi-Directional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-stdio-local-tool-skeleton" class="md-nav__link">
    <span class="md-ellipsis">
      7) STDIO (Local Tool) Skeleton
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-observability-essentials" class="md-nav__link">
    <span class="md-ellipsis">
      8) Observability Essentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-exercises" class="md-nav__link">
    <span class="md-ellipsis">
      9) Exercises
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_9" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recap-key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Recap &amp; Key Takeaways
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Recap &amp; Key Takeaways">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-rpc-20-in-one-paragraph" class="md-nav__link">
    <span class="md-ellipsis">
      JSON-RPC 2.0 in One Paragraph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-its-simplicity-makes-it-ideal-for-agentic-ai-and-mcp" class="md-nav__link">
    <span class="md-ellipsis">
      Why Its Simplicity Makes It Ideal for Agentic AI and MCP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preview-of-part-2-json-rpc-in-mcp-and-agent-to-agent-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Preview of Part 2 — JSON-RPC in MCP and Agent-to-Agent Communication
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction-to-rpc-and-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction to RPC and JSON-RPC
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction to RPC and JSON-RPC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-essence-of-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      The Essence of RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-json" class="md-nav__link">
    <span class="md-ellipsis">
      Why JSON?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-rpc-20-the-modern-standard" class="md-nav__link">
    <span class="md-ellipsis">
      JSON-RPC 2.0 — The Modern Standard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateless-and-transport-agnostic" class="md-nav__link">
    <span class="md-ellipsis">
      Stateless and Transport-Agnostic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-analogy" class="md-nav__link">
    <span class="md-ellipsis">
      Example Analogy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-in-code-context" class="md-nav__link">
    <span class="md-ellipsis">
      Example in Code Context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evolution-of-the-specification-10-20" class="md-nav__link">
    <span class="md-ellipsis">
      Evolution of the Specification (1.0 → 2.0)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Evolution of the Specification (1.0 → 2.0)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-rpc-10-a-minimal-beginning" class="md-nav__link">
    <span class="md-ellipsis">
      JSON-RPC 1.0 — A Minimal Beginning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-rpc-20-stabilization-and-formalization" class="md-nav__link">
    <span class="md-ellipsis">
      JSON-RPC 2.0 — Stabilization and Formalization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-batch-request-in-20" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Batch Request in 2.0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-20-became-the-standard" class="md-nav__link">
    <span class="md-ellipsis">
      Why 2.0 Became the Standard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_1" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-message-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Core Message Structures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Message Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-three-fundamental-objects" class="md-nav__link">
    <span class="md-ellipsis">
      The Three Fundamental Objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-the-request-object" class="md-nav__link">
    <span class="md-ellipsis">
      1. The Request Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-the-response-object" class="md-nav__link">
    <span class="md-ellipsis">
      2. The Response Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-the-error-object" class="md-nav__link">
    <span class="md-ellipsis">
      3. The Error Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-putting-it-together" class="md-nav__link">
    <span class="md-ellipsis">
      4. Putting It Together
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-why-this-design-matters" class="md-nav__link">
    <span class="md-ellipsis">
      5. Why This Design Matters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_2" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requests-in-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      Requests in JSON-RPC
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Requests in JSON-RPC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-standard-requests" class="md-nav__link">
    <span class="md-ellipsis">
      1. Standard Requests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-positional-vs-named-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      2. Positional vs Named Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-notifications-fire-and-forget" class="md-nav__link">
    <span class="md-ellipsis">
      3. Notifications — Fire-and-Forget
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-batch-requests" class="md-nav__link">
    <span class="md-ellipsis">
      4. Batch Requests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-why-batch-and-notification-matter-in-modern-systems" class="md-nav__link">
    <span class="md-ellipsis">
      5. Why Batch and Notification Matter in Modern Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_3" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#responses-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Responses &amp; Error Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Responses &amp; Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-the-successful-response" class="md-nav__link">
    <span class="md-ellipsis">
      1. The Successful Response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-the-error-response" class="md-nav__link">
    <span class="md-ellipsis">
      2. The Error Response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-anatomy-of-the-error-object" class="md-nav__link">
    <span class="md-ellipsis">
      3. Anatomy of the Error Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-graceful-degradation" class="md-nav__link">
    <span class="md-ellipsis">
      4. Graceful Degradation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-batch-responses" class="md-nav__link">
    <span class="md-ellipsis">
      5. Batch Responses
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-invalid-requests" class="md-nav__link">
    <span class="md-ellipsis">
      6. Invalid Requests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-mapping-application-errors" class="md-nav__link">
    <span class="md-ellipsis">
      7. Mapping Application Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_4" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concurrency-state" class="md-nav__link">
    <span class="md-ellipsis">
      Concurrency &amp; State
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concurrency &amp; State">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-stateless-by-design" class="md-nav__link">
    <span class="md-ellipsis">
      1. Stateless by Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-the-role-of-id-in-concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      2. The Role of id in Concurrency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-asynchronous-processing" class="md-nav__link">
    <span class="md-ellipsis">
      3. Asynchronous Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-implications-for-distributed-systems" class="md-nav__link">
    <span class="md-ellipsis">
      4. Implications for Distributed Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-introducing-optional-context-or-session" class="md-nav__link">
    <span class="md-ellipsis">
      5. Introducing Optional Context or Session
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-observability-in-concurrency" class="md-nav__link">
    <span class="md-ellipsis">
      6. Observability in Concurrency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_5" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transport-layer-integrations" class="md-nav__link">
    <span class="md-ellipsis">
      Transport Layer Integrations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Transport Layer Integrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-http-the-most-common-transport" class="md-nav__link">
    <span class="md-ellipsis">
      1. HTTP — The Most Common Transport
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-websockets-bi-directional-persistent-connection" class="md-nav__link">
    <span class="md-ellipsis">
      2. WebSockets — Bi-Directional, Persistent Connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-server-sent-events-sse-for-streaming-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      3. Server-Sent Events (SSE) — For Streaming Outputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-local-ipc-stdio-lightweight-inter-process-communication" class="md-nav__link">
    <span class="md-ellipsis">
      4. Local IPC / STDIO — Lightweight Inter-Process Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-hybrid-and-gateway-transports" class="md-nav__link">
    <span class="md-ellipsis">
      5. Hybrid and Gateway Transports
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-observability-across-transports" class="md-nav__link">
    <span class="md-ellipsis">
      6. Observability Across Transports
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_6" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Security Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-message-validation" class="md-nav__link">
    <span class="md-ellipsis">
      1. Message Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-authentication-authorization" class="md-nav__link">
    <span class="md-ellipsis">
      2. Authentication &amp; Authorization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-message-signing-integrity" class="md-nav__link">
    <span class="md-ellipsis">
      3. Message Signing &amp; Integrity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-preventing-injection-attacks" class="md-nav__link">
    <span class="md-ellipsis">
      4. Preventing Injection Attacks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-replay-attack-protection" class="md-nav__link">
    <span class="md-ellipsis">
      5. Replay Attack Protection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-transport-level-security" class="md-nav__link">
    <span class="md-ellipsis">
      6. Transport-Level Security
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-error-hygiene" class="md-nav__link">
    <span class="md-ellipsis">
      7. Error Hygiene
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-access-control-between-agents" class="md-nav__link">
    <span class="md-ellipsis">
      8. Access Control Between Agents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_7" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparison-with-alternatives" class="md-nav__link">
    <span class="md-ellipsis">
      Comparison with Alternatives
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Comparison with Alternatives">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-rest-vs-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      1. REST vs JSON-RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-grpc-vs-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      2. gRPC vs JSON-RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-soap-vs-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      3. SOAP vs JSON-RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-graphql-vs-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      4. GraphQL vs JSON-RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-when-to-choose-json-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      5. When to Choose JSON-RPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_8" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hands-on-topics" class="md-nav__link">
    <span class="md-ellipsis">
      Hands-On Topics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hands-On Topics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-minimal-server-fastapi-python" class="md-nav__link">
    <span class="md-ellipsis">
      1) Minimal Server (FastAPI, Python)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-minimal-client-python" class="md-nav__link">
    <span class="md-ellipsis">
      2) Minimal Client (Python)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-batch-and-notifications" class="md-nav__link">
    <span class="md-ellipsis">
      3) Batch and Notifications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-structured-error-mapping-llm-example" class="md-nav__link">
    <span class="md-ellipsis">
      4) Structured Error Mapping (LLM Example)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-streaming-with-sse-server" class="md-nav__link">
    <span class="md-ellipsis">
      5) Streaming with SSE (Server)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-websocket-variant-bi-directional" class="md-nav__link">
    <span class="md-ellipsis">
      6) WebSocket Variant (Bi-Directional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-stdio-local-tool-skeleton" class="md-nav__link">
    <span class="md-ellipsis">
      7) STDIO (Local Tool) Skeleton
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-observability-essentials" class="md-nav__link">
    <span class="md-ellipsis">
      8) Observability Essentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-exercises" class="md-nav__link">
    <span class="md-ellipsis">
      9) Exercises
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probable-doubts-clarifications_9" class="md-nav__link">
    <span class="md-ellipsis">
      Probable Doubts &amp; Clarifications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recap-key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Recap &amp; Key Takeaways
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Recap &amp; Key Takeaways">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#json-rpc-20-in-one-paragraph" class="md-nav__link">
    <span class="md-ellipsis">
      JSON-RPC 2.0 in One Paragraph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-its-simplicity-makes-it-ideal-for-agentic-ai-and-mcp" class="md-nav__link">
    <span class="md-ellipsis">
      Why Its Simplicity Makes It Ideal for Agentic AI and MCP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preview-of-part-2-json-rpc-in-mcp-and-agent-to-agent-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Preview of Part 2 — JSON-RPC in MCP and Agent-to-Agent Communication
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>JRPC - JSON Remote Procedure Call</h1>

<p><img alt="Image 1" src="../images/1.jpg" /></p>
<h2 id="introduction-to-rpc-and-json-rpc">Introduction to RPC and JSON-RPC<a class="headerlink" href="#introduction-to-rpc-and-json-rpc" title="Permanent link">&para;</a></h2>
<p>When we write software, functions are usually invoked locally — you call them, they run inside your process, and you get a result back. But what if the function you want to call lives on another machine? Maybe a cloud service, an AI model, or an internal microservice in your organization.</p>
<p>That’s where <strong>Remote Procedure Calls (RPCs)</strong> come in.</p>
<p>RPC allows a program to execute a function <strong>remotely</strong> but interact <strong>as if it were local</strong>.<br />
It hides the complexity of networking, serialization, and transport behind a simple call interface.<br />
The calling code doesn’t need to know <em>how</em> or <em>where</em> the function runs — only <em>what</em> it does.</p>
<p><img alt="Image 2" src="../images/2.jpg" /></p>
<hr />
<h3 id="the-essence-of-rpc">The Essence of RPC<a class="headerlink" href="#the-essence-of-rpc" title="Permanent link">&para;</a></h3>
<p>In a typical RPC setup:</p>
<ol>
<li>
<p>The <strong>client</strong> calls a function, say <code>get_user(42)</code>.</p>
</li>
<li>
<p>This call is transformed into a <strong>request message</strong> (containing the method name, arguments, and an ID).</p>
</li>
<li>
<p>The message is sent to a <strong>remote server</strong> over a network.</p>
</li>
<li>
<p>The server executes the method and sends back a <strong>response message</strong> with the result.</p>
</li>
</ol>
<p>To the programmer, it feels like a simple local call — but underneath, it’s a <strong>request–response exchange</strong> happening across systems.</p>
<details class="info">
<summary>Historical Context</summary>
<p>The idea of RPC dates back to the 1980s. It was formalized by Birrell and Nelson (1984) and later implemented in technologies like XML-RPC, CORBA, and SOAP. JSON-RPC is a <strong>modern, minimal successor</strong> to those early RPC protocols.</p>
</details>
<hr />
<h3 id="why-json">Why JSON?<a class="headerlink" href="#why-json" title="Permanent link">&para;</a></h3>
<p>JSON (JavaScript Object Notation) became the natural choice for modern RPC protocols for a few reasons:</p>
<ol>
<li>
<p><strong>Lightweight and Readable:</strong> Easy to read and debug without extra tooling.</p>
</li>
<li>
<p><strong>Language-Agnostic:</strong> Works seamlessly across Python, JavaScript, Java, Go, and more.</p>
</li>
<li>
<p><strong>Ubiquitous Support:</strong> Every major language can serialize and parse JSON natively.</p>
</li>
<li>
<p><strong>Web-Native:</strong> Perfect fit for HTTP, WebSockets, and web-based clients.</p>
</li>
</ol>
<details class="tip">
<summary>Design Insight</summary>
<p>Choosing JSON makes RPC systems interoperable — a Python backend and a JavaScript frontend can talk using the same protocol without any binary decoding or code generation.</p>
</details>
<hr />
<h3 id="json-rpc-20-the-modern-standard">JSON-RPC 2.0 — The Modern Standard<a class="headerlink" href="#json-rpc-20-the-modern-standard" title="Permanent link">&para;</a></h3>
<p><strong>JSON-RPC 2.0</strong> is a formal specification that defines <em>how</em> to perform remote calls using JSON messages.<br />
It standardizes the shape of the request, response, and error messages — ensuring that any two systems that follow the spec can communicate flawlessly.</p>
<p>A minimal example of a JSON-RPC call looks like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>
<p>and the corresponding response:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>
<p><img alt="Image 3" src="../images/3.jpg" />
This exchange is <strong>transport-agnostic</strong> — it could happen over HTTP, WebSockets, or even a local pipe between two processes.<br />
What matters is not <em>how</em> the message moves, but <em>how it is structured.</em></p>
<hr />
<h3 id="stateless-and-transport-agnostic">Stateless and Transport-Agnostic<a class="headerlink" href="#stateless-and-transport-agnostic" title="Permanent link">&para;</a></h3>
<p>A JSON-RPC system is <strong>stateless</strong>, meaning each message carries all the information needed for execution.<br />
The server doesn’t rely on any previous requests — making it easier to scale horizontally or retry safely.</p>
<p>It’s also <strong>transport-agnostic</strong>, meaning it doesn’t care whether the message travels via:</p>
<ul>
<li>
<p>HTTP POST request</p>
</li>
<li>
<p>WebSocket frame</p>
</li>
<li>
<p>Standard input/output (as used in local agents)</p>
</li>
</ul>
<p>This flexibility makes it perfect for <strong>agent frameworks</strong> and <strong>AI systems</strong>, where communication can happen within a single machine or across distributed networks.</p>
<div class="admonition note">
<p class="admonition-title">Why This Matters</p>
<p>In LLM-based frameworks (like MCP or LangGraph), agents often need to communicate using a consistent format — regardless of where they run. JSON-RPC provides that universal structure.</p>
</div>
<hr />
<h3 id="example-analogy">Example Analogy<a class="headerlink" href="#example-analogy" title="Permanent link">&para;</a></h3>
<p>Imagine calling your friend to ask, “Can you calculate 2 + 3 for me?”</p>
<ul>
<li>
<p>You speak the <strong>method</strong> (<code>calculate</code>)</p>
</li>
<li>
<p>Provide <strong>parameters</strong> (<code>2</code> and <code>3</code>)</p>
</li>
<li>
<p>Expect a <strong>result</strong> (<code>5</code>)</p>
</li>
</ul>
<p>That conversation, if structured into a JSON message, <em>is</em> JSON-RPC in spirit.<br />
It’s a shared language both sides understand — structured, predictable, and easy to automate.</p>
<hr />
<h3 id="example-in-code-context">Example in Code Context<a class="headerlink" href="#example-in-code-context" title="Permanent link">&para;</a></h3>
<p>Below is a conceptual visualization of how it might look in a Pythonic scenario:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Local call</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="c1"># Remote call using JSON-RPC</span>
<span class="n">rpc_message</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span>
    <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
<span class="n">send_to_server</span><span class="p">(</span><span class="n">rpc_message</span><span class="p">)</span>
</code></pre></div>
<p>The logic stays the same — only the transport mechanism changes.</p>
<hr />
<h3 id="probable-doubts-clarifications">Probable Doubts &amp; Clarifications<a class="headerlink" href="#probable-doubts-clarifications" title="Permanent link">&para;</a></h3>
<p><strong>Q1.</strong> <em>If I send JSON data via HTTP, is it automatically JSON-RPC?</em><br />
<strong>A.</strong> No. JSON-RPC follows a specific schema (<code>jsonrpc</code>, <code>method</code>, <code>params</code>, <code>id</code>). Plain JSON over HTTP is just data exchange, not RPC.</p>
<p><strong>Q2.</strong> <em>Is REST also a form of RPC?</em><br />
<strong>A.</strong> Conceptually both enable remote interaction, but REST is a <strong>software architecture</strong>, while JSON-RPC is a <strong>messaging protocol</strong>. REST revolves around resources; JSON-RPC revolves around methods.</p>
<p><strong>Q3.</strong> <em>Why call it “message grammar”?</em><br />
<strong>A.</strong> Because JSON-RPC defines the <strong>exact sentence structure</strong> for how machines talk — which fields, what order, and what types. That’s why it’s compared to grammar, whereas REST is more like a writing style.</p>
<hr />
<h2 id="evolution-of-the-specification-10-20">Evolution of the Specification (1.0 → 2.0)<a class="headerlink" href="#evolution-of-the-specification-10-20" title="Permanent link">&para;</a></h2>
<p>When JSON-RPC was first introduced, its mission was simple — make <strong>remote procedure calls</strong> lightweight, readable, and easy to implement. The earliest version, <strong>JSON-RPC 1.0</strong>, succeeded in that goal but lacked the structure and resilience needed for complex, distributed systems.</p>
<p>To understand the design of version 2.0, we’ll look at how it evolved from that minimal first draft.</p>
<hr />
<h3 id="json-rpc-10-a-minimal-beginning">JSON-RPC 1.0 — A Minimal Beginning<a class="headerlink" href="#json-rpc-10-a-minimal-beginning" title="Permanent link">&para;</a></h3>
<p>The original 1.0 spec was intentionally simple.<br />
A message looked something like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>That’s it. No version field, no error schema — just method, parameters, and ID.</p>
<p>While this simplicity made early experimentation easy, it came with significant drawbacks:</p>
<ol>
<li>
<p><strong>No Standard Error Format:</strong> Each server returned errors differently.</p>
</li>
<li>
<p><strong>No Versioning:</strong> Clients couldn’t negotiate features or compatibility.</p>
</li>
<li>
<p><strong>No Notifications:</strong> Every request required a response, even for trivial updates.</p>
</li>
<li>
<p><strong>No Batching:</strong> Multiple calls meant multiple network round trips.</p>
</li>
<li>
<p><strong>Loose Validation:</strong> Servers couldn’t easily detect malformed requests.</p>
</li>
</ol>
<p>In other words, it worked fine for toy systems, but not for production APIs where reliability and debugging mattered.</p>
<details class="info">
<summary>Historical Note</summary>
<p>JSON-RPC 1.0 emerged around the same time as XML-RPC and early REST experiments. The community quickly realized that while human-readable formats like JSON were excellent, they needed a stricter contract to avoid ambiguity between client and server.</p>
</details>
<hr />
<h3 id="json-rpc-20-stabilization-and-formalization">JSON-RPC 2.0 — Stabilization and Formalization<a class="headerlink" href="#json-rpc-20-stabilization-and-formalization" title="Permanent link">&para;</a></h3>
<p>Version 2.0, finalized in 2010, fixed those issues. It didn’t change the philosophy — just the discipline. The protocol was hardened into a <strong>deterministic message grammar</strong>.</p>
<p><strong>Key Additions in 2.0:</strong></p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Version 1.0</th>
<th>Version 2.0</th>
<th>Why It Matters</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Version Field</strong></td>
<td>Absent</td>
<td><code>"jsonrpc": "2.0"</code> (mandatory)</td>
<td>Ensures both sides speak the same spec.</td>
</tr>
<tr>
<td><strong>Error Object</strong></td>
<td>Free-form text</td>
<td>Standard structure: <code>code</code>, <code>message</code>, <code>data</code></td>
<td>Enables machine-readable error handling.</td>
</tr>
<tr>
<td><strong>Notifications</strong></td>
<td>Not defined</td>
<td>Requests without <code>id</code> → no response expected</td>
<td>Supports “fire-and-forget” actions like logging.</td>
</tr>
<tr>
<td><strong>Batch Calls</strong></td>
<td>Not defined</td>
<td>Arrays of requests</td>
<td>Improves efficiency and concurrency.</td>
</tr>
<tr>
<td><strong>Parameter Flexibility</strong></td>
<td>Positional only</td>
<td>Named or positional</td>
<td>Increases readability and supports optional params.</td>
</tr>
<tr>
<td><strong>Transport Neutrality</strong></td>
<td>Implicit HTTP</td>
<td>Explicitly transport-agnostic</td>
<td>Works equally well over HTTP, WebSockets, or STDIO.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="example-batch-request-in-20">Example: Batch Request in 2.0<a class="headerlink" href="#example-batch-request-in-20" title="Permanent link">&para;</a></h3>
<p>A <strong>batch request</strong> allows multiple calls in one network exchange:</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;subtract&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<p>And the <strong>server’s response</strong> might look like:</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<p>Each call is independent, and results can arrive in any order.<br />
The <code>id</code> values ensure that clients match them correctly.</p>
<hr />
<h3 id="why-20-became-the-standard">Why 2.0 Became the Standard<a class="headerlink" href="#why-20-became-the-standard" title="Permanent link">&para;</a></h3>
<p>The upgrade to 2.0 wasn’t about adding bells and whistles — it was about <strong>creating trust</strong> between communicating systems.<br />
By enforcing a strict structure, JSON-RPC became:</p>
<ul>
<li>
<p>Easier to implement correctly across languages.</p>
</li>
<li>
<p>Safer to use in multi-threaded, distributed systems.</p>
</li>
<li>
<p>Easier to debug because every response followed the same pattern.</p>
</li>
</ul>
<p>This made it ideal for <strong>AI systems</strong>, <strong>agent frameworks</strong>, and <strong>tool orchestration</strong>, where clarity and determinism are essential.</p>
<details class="tip">
<summary>For Developers</summary>
<p>If you see <code>"jsonrpc": "2.0"</code> in an API payload, that's your signal you're working with a formal, spec-compliant protocol — not just ad hoc JSON.</p>
</details>
<hr />
<h3 id="probable-doubts-clarifications_1">Probable Doubts &amp; Clarifications<a class="headerlink" href="#probable-doubts-clarifications_1" title="Permanent link">&para;</a></h3>
<p><strong>Q1.</strong> <em>Why was the version field made mandatory?</em><br />
<strong>A.</strong> To prevent silent incompatibility. Without it, clients and servers might assume the same message rules but interpret them differently.</p>
<p><strong>Q2.</strong> <em>How do batch requests help in real-world systems?</em><br />
<strong>A.</strong> They reduce network latency and make it possible to process multiple calls concurrently. This is critical in systems where agents or LLM tools invoke many micro-operations at once.</p>
<p><strong>Q3.</strong> <em>Can notifications and standard calls be mixed in a batch?</em><br />
<strong>A.</strong> Yes. Notifications (requests without <code>id</code>) are simply ignored by the server when forming responses, while normal calls generate response objects.</p>
<hr />
<h2 id="core-message-structures">Core Message Structures<a class="headerlink" href="#core-message-structures" title="Permanent link">&para;</a></h2>
<p>At the heart of JSON-RPC lies a simple but powerful idea — <strong>every interaction is a structured message</strong>.<br />
Unlike ad hoc JSON APIs that vary wildly in format, JSON-RPC standardizes the way requests, responses, and errors are represented.</p>
<p>This predictable structure is what allows different languages, agents, and systems to communicate seamlessly.</p>
<hr />
<h3 id="the-three-fundamental-objects">The Three Fundamental Objects<a class="headerlink" href="#the-three-fundamental-objects" title="Permanent link">&para;</a></h3>
<p>Every JSON-RPC exchange revolves around three building blocks:</p>
<ol>
<li>
<p><strong>Request Object</strong> — the client asking for a procedure to be executed.</p>
</li>
<li>
<p><strong>Response Object</strong> — the server’s reply to that request.</p>
</li>
<li>
<p><strong>Error Object</strong> — a structured report of what went wrong.</p>
</li>
</ol>
<p>Let’s examine each in turn.</p>
<hr />
<h3 id="1-the-request-object">1. The Request Object<a class="headerlink" href="#1-the-request-object" title="Permanent link">&para;</a></h3>
<p>A <strong>request</strong> is a message sent by the client to invoke a method on the server.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Required Fields</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>jsonrpc</code></td>
<td>string</td>
<td>Must be <code>"2.0"</code> — identifies the protocol version.</td>
</tr>
<tr>
<td><code>method</code></td>
<td>string</td>
<td>The name of the remote function to call.</td>
</tr>
<tr>
<td><code>params</code></td>
<td>array or object</td>
<td>Input arguments — optional.</td>
</tr>
<tr>
<td><code>id</code></td>
<td>string, number, or null</td>
<td>A unique identifier for matching responses.</td>
</tr>
</tbody>
</table>
<p>There’s no ambiguity here — the message always declares its version and method name explicitly.</p>
<details class="info">
<summary>Named vs Positional Parameters</summary>
<p>You can send parameters as an <strong>array</strong> (<code>[2,3]</code>) or as an <strong>object</strong> (<code>{"a":2,"b":3}</code>).<br />
Named parameters are more readable, while positional ones are compact and slightly faster to serialize.</p>
</details>
<hr />
<h3 id="2-the-response-object">2. The Response Object<a class="headerlink" href="#2-the-response-object" title="Permanent link">&para;</a></h3>
<p>When the server successfully executes a request, it returns a <strong>response object</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Response Rules</strong></p>
<ul>
<li>
<p>The <code>id</code> must match the request’s <code>id</code>.</p>
</li>
<li>
<p>The response includes either a <code>result</code> <strong>or</strong> an <code>error</code> — never both.</p>
</li>
<li>
<p>The structure ensures predictable parsing by clients.</p>
</li>
</ul>
<p>If the call failed, the server sends an error object instead of <code>result</code>.</p>
<hr />
<h3 id="3-the-error-object">3. The Error Object<a class="headerlink" href="#3-the-error-object" title="Permanent link">&para;</a></h3>
<p>An <strong>error object</strong> communicates structured failure.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-32601</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Method not found&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;multiply&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Error Fields</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>code</code></td>
<td>integer</td>
<td>A standard or application-defined error code.</td>
</tr>
<tr>
<td><code>message</code></td>
<td>string</td>
<td>A short description of the error.</td>
</tr>
<tr>
<td><code>data</code></td>
<td>any</td>
<td>Optional details for debugging or context.</td>
</tr>
</tbody>
</table>
<p><strong>Standard Error Codes</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Meaning</th>
<th>Common Cause</th>
</tr>
</thead>
<tbody>
<tr>
<td>−32600</td>
<td>Invalid Request</td>
<td>Malformed message.</td>
</tr>
<tr>
<td>−32601</td>
<td>Method Not Found</td>
<td>Unknown or unregistered function.</td>
</tr>
<tr>
<td>−32602</td>
<td>Invalid Params</td>
<td>Wrong argument type or structure.</td>
</tr>
<tr>
<td>−32603</td>
<td>Internal Error</td>
<td>Exception during execution.</td>
</tr>
<tr>
<td>−32000 – −32099</td>
<td>Server-defined</td>
<td>Custom application-level errors.</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="4-putting-it-together">4. Putting It Together<a class="headerlink" href="#4-putting-it-together" title="Permanent link">&para;</a></h3>
<p>A single JSON-RPC interaction can be visualized like this:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Request</span>
<span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span>

<span class="c1">// Success Response</span>
<span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span>

<span class="c1">// Error Response</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-32601</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Method not found&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>
<p>This structure is deliberately simple — yet powerful enough to represent all remote interactions, from local agent calls to distributed AI tool orchestration.</p>
<hr />
<h3 id="5-why-this-design-matters">5. Why This Design Matters<a class="headerlink" href="#5-why-this-design-matters" title="Permanent link">&para;</a></h3>
<p>A fixed schema allows:</p>
<ul>
<li>
<p><strong>Deterministic parsing:</strong> clients always know what to expect.</p>
</li>
<li>
<p><strong>Cross-language reliability:</strong> any compliant client can talk to any compliant server.</p>
</li>
<li>
<p><strong>LLM safety:</strong> large language models can generate or interpret structured responses consistently.</p>
</li>
</ul>
<p>In multi-agent setups, this predictability is crucial — agents don’t guess what a “success” or “error” looks like; they parse it.</p>
<details class="tip">
<summary>Best Practice for AI Systems</summary>
<p>When integrating LLMs with JSON-RPC, ensure you log both the raw <code>request</code> and <code>response</code> payloads. This makes debugging token generation or tool invocation errors far easier.</p>
</details>
<hr />
<h3 id="probable-doubts-clarifications_2">Probable Doubts &amp; Clarifications<a class="headerlink" href="#probable-doubts-clarifications_2" title="Permanent link">&para;</a></h3>
<p><strong>Q1.</strong> <em>Can <code>result</code> and <code>error</code> appear together?</em><br />
<strong>A.</strong> No. A response must contain either <code>result</code> or <code>error</code>. Having both violates the spec.</p>
<p><strong>Q2.</strong> <em>When is <code>id</code> set to <code>null</code>?</em><br />
<strong>A.</strong> When a request fails so early (e.g., malformed JSON) that the server can’t determine the <code>id</code>. The spec requires returning <code>"id": null</code> in such cases.</p>
<p><strong>Q3.</strong> <em>Can we define custom error codes?</em><br />
<strong>A.</strong> Yes, in the <code>-32000</code> to <code>-32099</code> range. These are reserved for application-specific errors (e.g., validation failures, permission issues).</p>
<hr />
<h2 id="requests-in-json-rpc">Requests in JSON-RPC<a class="headerlink" href="#requests-in-json-rpc" title="Permanent link">&para;</a></h2>
<p>Every interaction in JSON-RPC begins with a <strong>request</strong> — the client’s way of asking the server to perform a specific operation.<br />
A request isn’t just a message; it’s a structured intent: <em>“Call this method, with these parameters, and give me the result.”</em></p>
<p>Because JSON-RPC was designed for simplicity and flexibility, it supports multiple request forms — standard calls, notifications, and batch requests.</p>
<hr />
<h3 id="1-standard-requests">1. Standard Requests<a class="headerlink" href="#1-standard-requests" title="Permanent link">&para;</a></h3>
<p>A standard request is what most developers think of when they hear “API call.”<br />
It expects a response, and it carries a unique <code>id</code> to match the reply.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>
<p>When the operation completes, the server sends a response containing either:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>or, if something goes wrong:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-32601</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Method not found&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>
<p>The matching <code>id</code> guarantees the client knows which request this result belongs to — even if multiple requests are in progress.</p>
<details class="tip">
<summary>Best Practice</summary>
<p>Always use unique <code>id</code>s for each request in concurrent systems.<br />
Reusing the same ID for multiple calls can cause mismatched or overwritten results.</p>
</details>
<hr />
<h3 id="2-positional-vs-named-parameters">2. Positional vs Named Parameters<a class="headerlink" href="#2-positional-vs-named-parameters" title="Permanent link">&para;</a></h3>
<p>JSON-RPC allows two styles of parameters:</p>
<h4 id="positional-parameters"><strong>Positional Parameters</strong><a class="headerlink" href="#positional-parameters" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span>
</code></pre></div>
<p>These follow the order defined by the method signature — compact and fast, but less descriptive.</p>
<h4 id="named-parameters"><strong>Named Parameters</strong><a class="headerlink" href="#named-parameters" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;b&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>Named parameters increase clarity and flexibility, especially for optional arguments.</p>
<p>Many production APIs favor <strong>named parameters</strong> because they make debugging and versioning easier.</p>
<details class="info">
<summary>Practical Example</summary>
<p>Imagine a function that adds two numbers but later introduces a third, optional parameter for scaling.<br />
If you use positional arguments, existing clients break.<br />
With named arguments, they continue working because order no longer matters.</p>
</details>
<hr />
<h3 id="3-notifications-fire-and-forget">3. Notifications — Fire-and-Forget<a class="headerlink" href="#3-notifications-fire-and-forget" title="Permanent link">&para;</a></h3>
<p>A <strong>notification</strong> is a request sent without an <code>id</code>.<br />
The server performs the action but does <strong>not send back a response</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;logEvent&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;User logged in&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Because there’s no <code>id</code>, the client can’t match a response — in fact, the spec forbids the server from sending one.</p>
<p>Use notifications when:</p>
<ul>
<li>
<p>The client doesn’t need confirmation.</p>
</li>
<li>
<p>The operation is lightweight or purely side-effect-based (like logging or telemetry).</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Caution</p>
<p>Notifications are <strong>unacknowledged</strong> — if a network failure occurs, the client won't know.<br />
Use them only when reliability isn't critical.</p>
</div>
<hr />
<h3 id="4-batch-requests">4. Batch Requests<a class="headerlink" href="#4-batch-requests" title="Permanent link">&para;</a></h3>
<p>One of JSON-RPC 2.0’s most powerful features is the ability to send <strong>multiple requests in one array</strong>.<br />
This reduces network overhead and enables concurrent execution.</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;subtract&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;logEvent&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;batchStart&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">  </span><span class="c1">// notification</span>
<span class="p">]</span>
</code></pre></div>
<p>The server processes each independently and replies with an array of responses:</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<p>Notice that the notification (<code>logEvent</code>) has no response.</p>
<details class="info">
<summary>Concurrency Implication</summary>
<p>The spec allows servers to process batched requests <strong>in any order</strong> or even <strong>in parallel</strong>.<br />
Clients must always match responses by <code>id</code>, not by position.</p>
</details>
<hr />
<h3 id="5-why-batch-and-notification-matter-in-modern-systems">5. Why Batch and Notification Matter in Modern Systems<a class="headerlink" href="#5-why-batch-and-notification-matter-in-modern-systems" title="Permanent link">&para;</a></h3>
<p>These features may seem optional, but they are critical for <strong>agentic AI frameworks</strong> like MCP and LangGraph.<br />
In such systems, one agent might call multiple tools at once, mix synchronous and asynchronous work, and fire telemetry updates — all using JSON-RPC batch semantics.</p>
<p>Example scenario:</p>
<ul>
<li>
<p><code>tools/call</code> for computation</p>
</li>
<li>
<p><code>resources/read</code> for data</p>
</li>
<li>
<p><code>logEvent</code> as a notification</p>
</li>
</ul>
<p>All three can happen within a single JSON-RPC batch.</p>
<hr />
<h3 id="probable-doubts-clarifications_3">Probable Doubts &amp; Clarifications<a class="headerlink" href="#probable-doubts-clarifications_3" title="Permanent link">&para;</a></h3>
<p><strong>Q1.</strong> <em>How does the server detect a notification?</em><br />
<strong>A.</strong> By the absence of an <code>id</code> field. If there’s no <code>id</code>, it’s a one-way message and must not trigger a response.</p>
<p><strong>Q2.</strong> <em>Can batch requests contain both notifications and normal calls?</em><br />
<strong>A.</strong> Yes. Notifications are simply ignored in the server’s response array.</p>
<p><strong>Q3.</strong> <em>What happens if a batch array is empty (<code>[]</code>)?</em><br />
<strong>A.</strong> The server must return an error (<code>Invalid Request -32600</code>), as an empty batch is not allowed by the spec.</p>
<p><strong>Q4.</strong> <em>Do batch requests guarantee order of execution?</em><br />
<strong>A.</strong> No. Execution order is implementation-defined. Clients must rely on IDs, not order, for correlating responses.</p>
<hr />
<h2 id="responses-error-handling">Responses &amp; Error Handling<a class="headerlink" href="#responses-error-handling" title="Permanent link">&para;</a></h2>
<p>A request is only half the story. The other half — and arguably the more critical one — is the <strong>response</strong>.<br />
In JSON-RPC, every request (except notifications) must receive a <strong>structured response</strong> that tells the client exactly what happened — success or failure, never ambiguity.</p>
<p>This section explores how JSON-RPC standardizes responses and why that predictability makes it ideal for automation, testing, and AI agent workflows.</p>
<hr />
<h3 id="1-the-successful-response">1. The Successful Response<a class="headerlink" href="#1-the-successful-response" title="Permanent link">&para;</a></h3>
<p>When everything goes right, the server returns a <strong>result object</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>
<p>The rules are simple but strict:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>jsonrpc</code></td>
<td>Must be <code>"2.0"</code> — indicates protocol version.</td>
</tr>
<tr>
<td><code>result</code></td>
<td>The output of the requested method.</td>
</tr>
<tr>
<td><code>id</code></td>
<td>Must match the <code>id</code> of the request that triggered this response.</td>
</tr>
</tbody>
</table>
<p>This <code>id</code>-based pairing ensures that even if multiple requests are processed in parallel, each response finds its way back to the right caller.</p>
<hr />
<h3 id="2-the-error-response">2. The Error Response<a class="headerlink" href="#2-the-error-response" title="Permanent link">&para;</a></h3>
<p>If something fails — the method doesn’t exist, parameters are invalid, or the server throws an exception — the server must respond with an <strong>error object</strong> instead of a <code>result</code>.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-32601</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Method not found&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;multiply&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Error responses follow the same top-level structure</strong> (<code>jsonrpc</code> and <code>id</code>) but replace <code>result</code> with a structured <code>error</code>.<br />
The presence of <code>error</code> makes the meaning unambiguous: something went wrong.</p>
<hr />
<h3 id="3-anatomy-of-the-error-object">3. Anatomy of the Error Object<a class="headerlink" href="#3-anatomy-of-the-error-object" title="Permanent link">&para;</a></h3>
<p>The <strong>error object</strong> standardizes how failures are reported:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>code</code></td>
<td>integer</td>
<td>A predefined or server-defined error code.</td>
</tr>
<tr>
<td><code>message</code></td>
<td>string</td>
<td>A brief, human-readable summary of the issue.</td>
</tr>
<tr>
<td><code>data</code></td>
<td>any</td>
<td>Optional field with extra context, debugging info, or stack trace.</td>
</tr>
</tbody>
</table>
<p><strong>Common Standard Error Codes</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Typical Cause</th>
</tr>
</thead>
<tbody>
<tr>
<td>−32600</td>
<td>Invalid Request</td>
<td>Message isn’t a valid JSON-RPC object.</td>
</tr>
<tr>
<td>−32601</td>
<td>Method Not Found</td>
<td>Unknown or unregistered method name.</td>
</tr>
<tr>
<td>−32602</td>
<td>Invalid Params</td>
<td>Parameter types or structure are incorrect.</td>
</tr>
<tr>
<td>−32603</td>
<td>Internal Error</td>
<td>Unexpected failure on the server side.</td>
</tr>
<tr>
<td>−32000 to −32099</td>
<td>Server-Defined Range</td>
<td>Application-specific errors (custom logic).</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="4-graceful-degradation">4. Graceful Degradation<a class="headerlink" href="#4-graceful-degradation" title="Permanent link">&para;</a></h3>
<p>The reason JSON-RPC enforces structured error reporting is <strong>graceful degradation</strong> — a failing system should degrade predictably, not crash.<br />
For example, an LLM-powered server that hits a context limit shouldn’t return a raw traceback or plain text error; it should return a structured error like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-32603</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LLM inference failed&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Prompt too long&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;max_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4096</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span>
<span class="p">}</span>
</code></pre></div>
<p>The client (or another agent) can parse this, detect recoverable issues, and retry with smaller input — no guesswork needed.</p>
<details class="info">
<summary>Why This Matters for AI Systems</summary>
<p>Deterministic error formats let agents make decisions automatically.<br />
If an LLM sees <code>"code": -32603</code>, it can infer <em>"retry or fallback"</em> instead of hallucinating recovery steps.</p>
</details>
<hr />
<h3 id="5-batch-responses">5. Batch Responses<a class="headerlink" href="#5-batch-responses" title="Permanent link">&para;</a></h3>
<p>When a batch of requests is sent, the server must return an <strong>array of responses</strong>, one for each request that had an <code>id</code>. Notifications (no <code>id</code>) do not appear in the array.</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-32602</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Invalid params&quot;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<p>Order doesn’t matter — the client matches each by <code>id</code>.</p>
<hr />
<h3 id="6-invalid-requests">6. Invalid Requests<a class="headerlink" href="#6-invalid-requests" title="Permanent link">&para;</a></h3>
<p>If the incoming message is malformed (e.g., not valid JSON or missing required fields), the server must still reply — but with <code>"id": null</code> because it cannot know which request failed.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-32600</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Invalid Request&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
</code></pre></div>
<p>This ensures clients always receive a <strong>syntactically valid</strong> JSON-RPC response, even for invalid inputs.</p>
<div class="admonition note">
<p class="admonition-title">Error Hygiene</p>
<p>Never expose internal stack traces in <code>message</code>.<br />
Place detailed logs in the server console or in <code>error.data</code>, and sanitize them before sending to clients.</p>
</div>
<hr />
<h3 id="7-mapping-application-errors">7. Mapping Application Errors<a class="headerlink" href="#7-mapping-application-errors" title="Permanent link">&para;</a></h3>
<p>One of the elegant parts of JSON-RPC is that application-specific failures can be <em>mapped</em> to structured error codes.</p>
<table>
<thead>
<tr>
<th>Application Scenario</th>
<th>Example Code</th>
<th>Message</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Validation Failure</td>
<td>-32001</td>
<td>"Invalid user data"</td>
<td>User input errors</td>
</tr>
<tr>
<td>Permission Denied</td>
<td>-32002</td>
<td>"Unauthorized"</td>
<td>Access control violation</td>
</tr>
<tr>
<td>Timeout</td>
<td>-32003</td>
<td>"Request timeout"</td>
<td>Long-running or unresponsive task</td>
</tr>
<tr>
<td>Dependency Error</td>
<td>-32004</td>
<td>"Upstream service failed"</td>
<td>External service errors</td>
</tr>
</tbody>
</table>
<p>In large ecosystems, this allows unified logging and recovery — an LLM agent or API client can apply consistent error-handling logic across very different systems.</p>
<hr />
<h3 id="probable-doubts-clarifications_4">Probable Doubts &amp; Clarifications<a class="headerlink" href="#probable-doubts-clarifications_4" title="Permanent link">&para;</a></h3>
<p><strong>Q1.</strong> <em>Why can’t both <code>result</code> and <code>error</code> appear together?</em><br />
<strong>A.</strong> Because it creates ambiguity. The spec enforces mutual exclusivity to ensure predictable parsing.</p>
<p><strong>Q2.</strong> <em>What’s the difference between <code>-32601</code> and <code>-32603</code>?</em><br />
<strong>A.</strong> <code>-32601</code> means the method doesn’t exist (client error). <code>-32603</code> means something broke during execution (server error).</p>
<p><strong>Q3.</strong> <em>Why return <code>"id": null"</code> for invalid requests?</em><br />
<strong>A.</strong> Because the server cannot know which request caused the failure — it might not even be valid JSON.</p>
<p><strong>Q4.</strong> <em>Can the client define its own error codes?</em><br />
<strong>A.</strong> Yes, within the server-defined range (<code>-32000</code> to <code>-32099</code>), as long as both sides agree on meaning.</p>
<hr />
<h2 id="concurrency-state">Concurrency &amp; State<a class="headerlink" href="#concurrency-state" title="Permanent link">&para;</a></h2>
<p>Up to this point, we’ve seen how a single JSON-RPC request travels to a server and returns a response.<br />
But in real-world systems — especially distributed or multi-agent architectures — many requests may be in flight simultaneously.<br />
How does JSON-RPC keep them organized and consistent without becoming stateful?</p>
<p>The answer lies in its <strong>stateless core design</strong> and the intelligent use of <strong>unique identifiers (<code>id</code>)</strong>.</p>
<hr />
<h3 id="1-stateless-by-design">1. Stateless by Design<a class="headerlink" href="#1-stateless-by-design" title="Permanent link">&para;</a></h3>
<p>JSON-RPC, like REST, follows a <strong>stateless</strong> communication model.<br />
This means every request carries all the data needed for the server to process it — there’s no dependency on past messages or sessions.</p>
<p><strong>Example:</strong><br />
When a client sends:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;getUserProfile&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;user_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>
<span class="p">}</span>
</code></pre></div>
<p>The server doesn’t rely on what happened in request <code>id: 4</code>. It processes this request independently.<br />
That makes scaling easier — any node in a cluster can handle any request.</p>
<details class="info">
<summary>Why Statelessness Matters</summary>
<p>Stateless design avoids synchronization overhead and eliminates the need for session tracking.<br />
This makes JSON-RPC ideal for distributed clusters, load-balanced systems, and agentic frameworks where many tools and models interact dynamically.</p>
</details>
<hr />
<h3 id="2-the-role-of-id-in-concurrency">2. The Role of <code>id</code> in Concurrency<a class="headerlink" href="#2-the-role-of-id-in-concurrency" title="Permanent link">&para;</a></h3>
<p>The <code>id</code> field is more than just a counter — it’s a <strong>correlation token</strong>.<br />
When multiple requests are sent concurrently, their responses may return in a different order.<br />
The <code>id</code> ensures the client can always match the correct response to the originating request.</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;subtract&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<p><strong>Server Response (order may differ):</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<p>The <code>id</code> values maintain consistency even when execution order or completion times vary.</p>
<details class="tip">
<summary>Best Practice for Concurrent Systems</summary>
<p>Use <strong>UUIDs or incrementing integers</strong> for IDs, and keep a mapping table in your client to track pending requests.<br />
This pattern is particularly helpful when using WebSockets or asynchronous transports.</p>
</details>
<hr />
<h3 id="3-asynchronous-processing">3. Asynchronous Processing<a class="headerlink" href="#3-asynchronous-processing" title="Permanent link">&para;</a></h3>
<p>In modern servers — especially those built with <strong>FastAPI</strong>, <strong>aiohttp</strong>, or <strong>Node.js</strong> — requests are handled asynchronously.<br />
Each incoming JSON-RPC call becomes a coroutine or event-loop task.</p>
<p><strong>Python Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_rpc_call</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;method&quot;</span><span class="p">)</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;params&quot;</span><span class="p">,</span> <span class="p">[])</span>
    <span class="n">req_id</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">execute_method</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">req_id</span><span class="p">}</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">32603</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">req_id</span><span class="p">}</span>
</code></pre></div>
<p>This structure ensures the server can handle many RPC calls simultaneously without blocking.</p>
<details class="info">
<summary>In Context of AI Systems</summary>
<p>In multi-agent orchestration (like MCP or LangGraph), asynchronous calls allow different tools or LLM agents to execute in parallel — e.g., one fetching context while another generates a response.<br />
JSON-RPC's statelessness keeps everything clean and deterministic.</p>
</details>
<hr />
<h3 id="4-implications-for-distributed-systems">4. Implications for Distributed Systems<a class="headerlink" href="#4-implications-for-distributed-systems" title="Permanent link">&para;</a></h3>
<p>Because every JSON-RPC message is independent:</p>
<ul>
<li>
<p><strong>Load Balancing</strong> becomes trivial — any request can hit any node.</p>
</li>
<li>
<p><strong>Resilience</strong> improves — a failed node doesn’t affect others.</p>
</li>
<li>
<p><strong>Parallel Execution</strong> becomes natural — batch or async calls run safely without shared state.</p>
</li>
</ul>
<p>You can even route RPCs through message queues, WebSockets, or local pipes while maintaining correctness through the <code>id</code>.</p>
<hr />
<h3 id="5-introducing-optional-context-or-session">5. Introducing Optional Context or Session<a class="headerlink" href="#5-introducing-optional-context-or-session" title="Permanent link">&para;</a></h3>
<p>Although the protocol itself is stateless, you can <strong>layer state on top</strong> when necessary.<br />
For example:</p>
<ul>
<li>
<p>Include a <code>session_token</code> or <code>conversation_id</code> in the <code>params</code>.</p>
</li>
<li>
<p>Maintain state in your application logic — not in the protocol layer.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;continueChat&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;session_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;abc-123&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tell me a joke.&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span>
<span class="p">}</span>
</code></pre></div>
<p>The server remains stateless, but your application still maintains continuity using identifiers in the payload.</p>
<div class="admonition note">
<p class="admonition-title">Separation of Concerns</p>
<p>JSON-RPC doesn't prevent you from tracking sessions — it just doesn't handle them for you.<br />
Keeping state at the application level avoids protocol bloat and makes implementations portable.</p>
</div>
<hr />
<h3 id="6-observability-in-concurrency">6. Observability in Concurrency<a class="headerlink" href="#6-observability-in-concurrency" title="Permanent link">&para;</a></h3>
<p>For debugging and tracing, many systems integrate <strong>observability frameworks</strong> (like Jaeger, OpenTelemetry, or LangFuse).<br />
These tools tag each request–response cycle with:</p>
<ul>
<li>
<p>The <code>id</code> (for correlation).</p>
</li>
<li>
<p>The method name.</p>
</li>
<li>
<p>Timing information (latency, duration).</p>
</li>
</ul>
<p>This allows performance visualization across concurrent requests — invaluable in complex AI and automation systems.</p>
<hr />
<h3 id="probable-doubts-clarifications_5">Probable Doubts &amp; Clarifications<a class="headerlink" href="#probable-doubts-clarifications_5" title="Permanent link">&para;</a></h3>
<p><strong>Q1.</strong> <em>How is ordering maintained when multiple requests are in flight?</em><br />
<strong>A.</strong> It isn’t — JSON-RPC doesn’t guarantee order. Clients must rely on the <code>id</code> field to correlate results.</p>
<p><strong>Q2.</strong> <em>Can I reuse the same <code>id</code> across requests?</em><br />
<strong>A.</strong> It’s not recommended. Reuse can cause ambiguity if responses arrive out of order or overlap.</p>
<p><strong>Q3.</strong> <em>Can JSON-RPC handle streaming or partial results?</em><br />
<strong>A.</strong> The core spec doesn’t define streaming, but extensions using <strong>Server-Sent Events (SSE)</strong> or <strong>WebSockets</strong> enable it — covered in the next section.</p>
<p><strong>Q4.</strong> <em>Does stateless mean I can’t have sessions?</em><br />
<strong>A.</strong> No — stateless refers to the <em>protocol</em>. Your application logic can still maintain sessions through <code>params</code> or tokens.</p>
<hr />
<h2 id="transport-layer-integrations">Transport Layer Integrations<a class="headerlink" href="#transport-layer-integrations" title="Permanent link">&para;</a></h2>
<p>The JSON-RPC 2.0 specification intentionally avoids mandating any single transport medium.<br />
It defines <strong>how messages should look</strong>, not <strong>how they should travel</strong>.<br />
This transport-agnostic design makes JSON-RPC incredibly versatile — it can move seamlessly between web servers, local processes, or even AI agents communicating over pipes.</p>
<p><img alt="Image 4" src="../images/4.jpg" /></p>
<hr />
<h3 id="1-http-the-most-common-transport">1. HTTP — The Most Common Transport<a class="headerlink" href="#1-http-the-most-common-transport" title="Permanent link">&para;</a></h3>
<p>The simplest and most widely used way to send JSON-RPC messages is via <strong>HTTP POST</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="nf">POST</span> <span class="nn">/rpc</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;add&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>The response follows the same pattern:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p><strong>Why HTTP works well:</strong></p>
<ul>
<li>
<p>Supported everywhere (browsers, microservices, cloud platforms).</p>
</li>
<li>
<p>Easy to debug using Postman or cURL.</p>
</li>
<li>
<p>Simple to secure via HTTPS.</p>
</li>
</ul>
<p>However, HTTP is <strong>request–response only</strong>. The client must always initiate communication.</p>
<details class="info">
<summary>Implementation Tip</summary>
<p>JSON-RPC over HTTP can be implemented using frameworks like <strong>FastAPI</strong>, <strong>Flask</strong>, or <strong>Express.js</strong>.<br />
Each RPC method maps to a single endpoint (often <code>/rpc</code>), with routing handled inside the server code.</p>
</details>
<hr />
<h3 id="2-websockets-bi-directional-persistent-connection">2. WebSockets — Bi-Directional, Persistent Connection<a class="headerlink" href="#2-websockets-bi-directional-persistent-connection" title="Permanent link">&para;</a></h3>
<p>For scenarios where both the client and server need to send messages, <strong>WebSockets</strong> are ideal.<br />
They establish a single persistent TCP connection that supports full duplex (two-way) communication.</p>
<p><strong>Why WebSockets matter:</strong></p>
<ul>
<li>
<p>Real-time applications (chat, monitoring, streaming).</p>
</li>
<li>
<p>Agent-to-agent communication where either side may initiate calls.</p>
</li>
<li>
<p>Persistent sessions without reconnect overhead.</p>
</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Client → Server</span>
<span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;getStatus&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">}</span>

<span class="c1">// Server → Client (push)</span>
<span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;onUpdate&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;running&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>Here, the server itself can issue method calls — something impossible in plain HTTP.</p>
<div class="admonition note">
<p class="admonition-title">Practical Example</p>
<p>In AI agent systems like <strong>MCP</strong>, WebSocket-based JSON-RPC allows two agents to "talk" as equals — each can send requests, responses, and notifications independently.</p>
</div>
<hr />
<h3 id="3-server-sent-events-sse-for-streaming-outputs">3. Server-Sent Events (SSE) — For Streaming Outputs<a class="headerlink" href="#3-server-sent-events-sse-for-streaming-outputs" title="Permanent link">&para;</a></h3>
<p><strong>SSE</strong> is a unidirectional streaming protocol that lets the server continuously push updates to the client.<br />
It’s particularly useful for <strong>LLM token streaming</strong> or <strong>long-running tasks</strong>.</p>
<p><strong>Example of SSE-based output stream:</strong></p>
<div class="highlight"><pre><span></span><code>data: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: &quot;Hel&quot;, &quot;id&quot;: 1 }
data: { &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;result&quot;: &quot;lo&quot;,  &quot;id&quot;: 1 }
data: [DONE]
</code></pre></div>
<p>Clients receive partial messages as events until <code>[DONE]</code> indicates completion.<br />
The messages themselves still respect JSON-RPC grammar — they’re just transmitted chunk-by-chunk.</p>
<details class="tip">
<summary>When to Use SSE</summary>
<p>Use SSE for <strong>one-directional, progressive delivery</strong> — perfect for AI-generated text, progress updates, or monitoring logs.<br />
Use WebSockets instead if you need both sides to send data dynamically.</p>
</details>
<hr />
<h3 id="4-local-ipc-stdio-lightweight-inter-process-communication">4. Local IPC / STDIO — Lightweight Inter-Process Communication<a class="headerlink" href="#4-local-ipc-stdio-lightweight-inter-process-communication" title="Permanent link">&para;</a></h3>
<p>Not all RPCs travel over the network.<br />
In many agent systems (like MCP), two processes on the same machine communicate over <strong>standard input/output (STDIO)</strong> or <strong>named pipes</strong>.</p>
<p><strong>Why STDIO is powerful:</strong></p>
<ul>
<li>
<p>No network setup — faster and more secure.</p>
</li>
<li>
<p>Perfect for local tool invocation by LLMs.</p>
</li>
<li>
<p>Low latency and minimal dependencies.</p>
</li>
</ul>
<p><strong>Example Flow:</strong></p>
<ol>
<li>
<p>The client writes a JSON-RPC request to the server’s <strong>stdin</strong>.</p>
</li>
<li>
<p>The server reads it, executes the method, and writes the JSON-RPC response to <strong>stdout</strong>.</p>
</li>
</ol>
<details class="info">
<summary>Real-World Usage</summary>
<p>MCP (Model Context Protocol) defines its agent servers using STDIO-based JSON-RPC.<br />
This allows LLM hosts, extensions, and local tools to communicate efficiently without HTTP or sockets.</p>
</details>
<hr />
<h3 id="5-hybrid-and-gateway-transports">5. Hybrid and Gateway Transports<a class="headerlink" href="#5-hybrid-and-gateway-transports" title="Permanent link">&para;</a></h3>
<p>In production systems, you’ll often see <strong>hybrid architectures</strong>:</p>
<ul>
<li>
<p>WebSocket → internal STDIO adapter</p>
</li>
<li>
<p>HTTP → internal message queue</p>
</li>
<li>
<p>SSE → user-facing progress updates</p>
</li>
</ul>
<p>Because JSON-RPC is <strong>transport-agnostic</strong>, you can route the same messages through different layers without breaking compatibility.</p>
<div class="admonition note">
<p class="admonition-title">Interoperability Benefit</p>
<p>A system built on JSON-RPC can switch between transports (HTTP, WebSocket, STDIO) with <strong>zero protocol changes</strong> — only the delivery layer changes.</p>
</div>
<hr />
<h3 id="6-observability-across-transports">6. Observability Across Transports<a class="headerlink" href="#6-observability-across-transports" title="Permanent link">&para;</a></h3>
<p>Regardless of transport, it’s critical to log:</p>
<ul>
<li>
<p>Request and response bodies.</p>
</li>
<li>
<p>Transport metadata (latency, connection ID).</p>
</li>
<li>
<p>Error events or dropped messages.</p>
</li>
</ul>
<p>These logs form the backbone of monitoring tools like <strong>LangFuse</strong>, <strong>Prometheus</strong>, or <strong>Jaeger</strong>, which visualize system health in multi-agent environments.</p>
<hr />
<h3 id="probable-doubts-clarifications_6">Probable Doubts &amp; Clarifications<a class="headerlink" href="#probable-doubts-clarifications_6" title="Permanent link">&para;</a></h3>
<p><strong>Q1.</strong> <em>Why is JSON-RPC called transport-agnostic?</em><br />
<strong>A.</strong> Because it only defines message structure, not delivery. You can send the same JSON payload through HTTP, WebSocket, or STDIO and it remains valid.</p>
<p><strong>Q2.</strong> <em>How does SSE fit into a request–response model?</em><br />
<strong>A.</strong> SSE represents a long-lived “response stream.” The request is still JSON-RPC, but the server responds in small, incremental JSON-RPC-compatible chunks.</p>
<p><strong>Q3.</strong> <em>Can I use multiple transports in one system?</em><br />
<strong>A.</strong> Yes. Many real systems use HTTP for setup, WebSocket for live traffic, and SSE for streaming results. JSON-RPC messages remain consistent across all.</p>
<p><strong>Q4.</strong> <em>Which transport is best for local LLM tools?</em><br />
<strong>A.</strong> STDIO — it’s fast, secure, and doesn’t require networking. That’s why most MCP servers use it internally.</p>
<hr />
<h2 id="security-considerations">Security Considerations<a class="headerlink" href="#security-considerations" title="Permanent link">&para;</a></h2>
<p>Since JSON-RPC is designed to be <strong>lightweight and transport-agnostic</strong>, it leaves security enforcement to the systems that use it.<br />
This flexibility is a strength—but also a potential weakness if not handled correctly.<br />
A secure JSON-RPC implementation must therefore combine <strong>protocol-level validation</strong>, <strong>transport security</strong>, and <strong>application-layer access control</strong>.</p>
<p><img alt="Image 5" src="../images/5.jpg" /></p>
<hr />
<h3 id="1-message-validation">1. Message Validation<a class="headerlink" href="#1-message-validation" title="Permanent link">&para;</a></h3>
<p>Before executing any method, the server must confirm that the incoming request is a <strong>valid JSON-RPC object</strong>.<br />
Validation ensures malicious or malformed messages don’t trigger unintended behavior.</p>
<p><strong>Checklist for Request Validation:</strong></p>
<ul>
<li>
<p>Confirm <code>"jsonrpc": "2.0"</code> exists and is correct.</p>
</li>
<li>
<p>Verify <code>method</code> is a <strong>string</strong> and matches an allowed list.</p>
</li>
<li>
<p>Ensure <code>params</code>, if present, are in valid JSON format.</p>
</li>
<li>
<p>Check <code>id</code> type (string, number, or null).</p>
</li>
</ul>
<p><strong>Example (Invalid Request):</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;unexpected&quot;</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>This violates the spec — <code>method</code> must be a string, and missing <code>"jsonrpc": "2.0"</code> makes it non-compliant.</p>
<details class="tip">
<summary>Implementation Tip</summary>
<p>Define a <strong>schema validator</strong> (e.g., Pydantic or JSON Schema) to reject malformed requests before business logic executes.<br />
This small step prevents entire classes of injection or serialization attacks.</p>
</details>
<hr />
<h3 id="2-authentication-authorization">2. Authentication &amp; Authorization<a class="headerlink" href="#2-authentication-authorization" title="Permanent link">&para;</a></h3>
<p>JSON-RPC itself doesn’t specify authentication fields.<br />
Instead, use your <strong>transport</strong> or <strong>application layer</strong> for verification.</p>
<p><strong>Common Patterns:</strong></p>
<ul>
<li>
<p><strong>HTTP:</strong> Use HTTPS + Bearer tokens or API keys in headers.</p>
</li>
<li>
<p><strong>WebSocket:</strong> Authenticate during the initial handshake.</p>
</li>
<li>
<p><strong>STDIO / Local:</strong> Rely on process-level trust or signed message tokens.</p>
</li>
</ul>
<p>Once authenticated, enforce <strong>authorization</strong>:</p>
<ul>
<li>
<p>Only permit specific clients or roles to invoke sensitive methods.</p>
</li>
<li>
<p>Maintain an <strong>allowlist</strong> of permitted method names.</p>
</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;admin/restartServer&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>Such methods should be restricted to trusted identities or local calls only.</p>
<div class="admonition note">
<p class="admonition-title">Principle of Least Privilege</p>
<p>Never expose system-level or destructive commands (e.g., file I/O, shell operations) without strict authorization checks.<br />
Treat every incoming request as untrusted until verified.</p>
</div>
<hr />
<h3 id="3-message-signing-integrity">3. Message Signing &amp; Integrity<a class="headerlink" href="#3-message-signing-integrity" title="Permanent link">&para;</a></h3>
<p>For higher trust systems—especially distributed AI frameworks—you can add <strong>cryptographic signing</strong> to verify message integrity.</p>
<p><strong>Patterns:</strong></p>
<ul>
<li>
<p>Include a signature in message headers (if using HTTP).</p>
</li>
<li>
<p>Add a <code>signature</code> field in the request <code>params</code>.</p>
</li>
<li>
<p>Use HMAC or JWT tokens to ensure data hasn’t been tampered with.</p>
</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;executeTask&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;task&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;train_model&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;signature&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a1b2c3...&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span>
<span class="p">}</span>
</code></pre></div>
<p>The server verifies the signature before running the method.</p>
<details class="info">
<summary>Advanced Use Case</summary>
<p>In multi-agent environments, signatures help verify that each message truly originates from a trusted agent rather than a spoofed process or external attacker.</p>
</details>
<hr />
<h3 id="4-preventing-injection-attacks">4. Preventing Injection Attacks<a class="headerlink" href="#4-preventing-injection-attacks" title="Permanent link">&para;</a></h3>
<p>Because JSON-RPC lets clients specify the method name and parameters, an unprotected implementation might be vulnerable to <strong>code injection</strong> if these fields are passed directly to interpreters.</p>
<p>Example of a dangerous scenario:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__import__(&#39;os&#39;).system(&#39;rm -rf /&#39;)&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">99</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>To prevent this:</p>
<ul>
<li>
<p>Never directly execute strings as code.</p>
</li>
<li>
<p>Map known method names to safe handler functions.</p>
</li>
<li>
<p>Reject any unknown or suspicious method names.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Safe dispatcher example</span>
<span class="n">methods</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;add&quot;</span><span class="p">:</span> <span class="n">add</span><span class="p">,</span>
    <span class="s2">&quot;subtract&quot;</span><span class="p">:</span> <span class="n">subtract</span>
<span class="p">}</span>

<span class="k">if</span> <span class="n">method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">methods</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">InvalidMethodError</span><span class="p">(</span><span class="s2">&quot;Unauthorized method call&quot;</span><span class="p">)</span>
</code></pre></div>
<hr />
<h3 id="5-replay-attack-protection">5. Replay Attack Protection<a class="headerlink" href="#5-replay-attack-protection" title="Permanent link">&para;</a></h3>
<p>A <strong>replay attack</strong> occurs when an attacker captures a valid request and resends it later.<br />
Because JSON-RPC is stateless, this is theoretically possible unless mitigated.</p>
<p><strong>Solutions:</strong></p>
<ul>
<li>
<p>Add <strong>timestamps</strong> or <strong>nonces</strong> in <code>params</code>.</p>
</li>
<li>
<p>Track recently seen request IDs for a short duration.</p>
</li>
<li>
<p>Sign messages with short-lived tokens.</p>
</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;transfer&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1728623456</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;nonce&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;xy12&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span>
<span class="p">}</span>
</code></pre></div>
<p>The server checks whether the <code>nonce</code> was already used; if so, it rejects the request.</p>
<hr />
<h3 id="6-transport-level-security">6. Transport-Level Security<a class="headerlink" href="#6-transport-level-security" title="Permanent link">&para;</a></h3>
<p>The simplest yet most important safeguard:<br />
<strong>always encrypt the channel</strong> carrying JSON-RPC messages.</p>
<table>
<thead>
<tr>
<th>Transport</th>
<th>Secure Form</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>HTTP</td>
<td>HTTPS</td>
<td>Standard web encryption (TLS).</td>
</tr>
<tr>
<td>WebSocket</td>
<td>WSS</td>
<td>Encrypts messages in both directions.</td>
</tr>
<tr>
<td>STDIO</td>
<td>Local process isolation</td>
<td>Trusted environment by design.</td>
</tr>
</tbody>
</table>
<p>Even if your JSON payload is harmless, unsecured transport can expose sensitive parameters or IDs.</p>
<div class="admonition note">
<p class="admonition-title">Encryption Is Non-Negotiable</p>
<p>Always use encrypted channels for remote RPCs.<br />
Even seemingly trivial data like <code>user_id</code> or <code>task_name</code> can reveal internal details to attackers.</p>
</div>
<hr />
<h3 id="7-error-hygiene">7. Error Hygiene<a class="headerlink" href="#7-error-hygiene" title="Permanent link">&para;</a></h3>
<p>Detailed error messages can leak system internals — a classic vulnerability.<br />
A well-designed server distinguishes between what’s safe to reveal and what’s not.</p>
<p><strong>Good Practice:</strong></p>
<ul>
<li>
<p>Keep <code>error.message</code> generic (e.g., <code>"Internal Error"</code>).</p>
</li>
<li>
<p>Include debug info only in <code>error.data</code>, and only for trusted clients.</p>
</li>
<li>
<p>Log full tracebacks privately on the server.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-32603</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Internal Error&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h3 id="8-access-control-between-agents">8. Access Control Between Agents<a class="headerlink" href="#8-access-control-between-agents" title="Permanent link">&para;</a></h3>
<p>In multi-agent ecosystems (like MCP), different agents or tools may call each other via JSON-RPC.<br />
To prevent abuse:</p>
<ul>
<li>
<p>Implement <strong>Access Control Lists (ACLs)</strong> per method or resource.</p>
</li>
<li>
<p>Use agent-level tokens for trust boundaries.</p>
</li>
<li>
<p>Enforce sandboxing for untrusted tools or extensions.</p>
</li>
</ul>
<details class="info">
<summary>Example in MCP Context</summary>
<p>A local LLM agent may expose tools like <code>file/read</code> or <code>system/exec</code>.<br />
Without ACLs, another agent could misuse them to access local data.<br />
Proper access control ensures one agent's capabilities don't leak to another.</p>
</details>
<hr />
<h3 id="probable-doubts-clarifications_7">Probable Doubts &amp; Clarifications<a class="headerlink" href="#probable-doubts-clarifications_7" title="Permanent link">&para;</a></h3>
<p><strong>Q1.</strong> <em>Where does authentication belong — protocol or transport?</em><br />
<strong>A.</strong> Transport. JSON-RPC doesn’t define auth itself; security should be handled via HTTP headers, WebSocket handshake, or external tokens.</p>
<p><strong>Q2.</strong> <em>How can I ensure message integrity across distributed systems?</em><br />
<strong>A.</strong> Use signed tokens or cryptographic message signatures to verify authenticity and prevent tampering.</p>
<p><strong>Q3.</strong> <em>What’s the best way to avoid method injection?</em><br />
<strong>A.</strong> Use a <strong>static dispatch table</strong> (dictionary of allowed methods) and reject anything else.</p>
<p><strong>Q4.</strong> <em>How do I secure inter-agent calls?</em><br />
<strong>A.</strong> Use ACLs and per-agent access tokens; never assume all internal traffic is trusted.</p>
<hr />
<h2 id="comparison-with-alternatives">Comparison with Alternatives<a class="headerlink" href="#comparison-with-alternatives" title="Permanent link">&para;</a></h2>
<p>Every protocol exists to solve a communication problem — but the <em>way</em> it does so determines where it fits best.<br />
JSON-RPC sits in an interesting middle ground: it’s more structured than plain REST but lighter and more flexible than gRPC or SOAP.<br />
To understand its role in modern architectures, let’s compare JSON-RPC with these other major API paradigms.</p>
<hr />
<h3 id="1-rest-vs-json-rpc">1. REST vs JSON-RPC<a class="headerlink" href="#1-rest-vs-json-rpc" title="Permanent link">&para;</a></h3>
<p>At first glance, both REST and JSON-RPC use JSON and HTTP.<br />
But their philosophies are entirely different.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>REST</th>
<th>JSON-RPC</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Paradigm</strong></td>
<td>Resource-oriented (nouns)</td>
<td>Procedure-oriented (verbs)</td>
</tr>
<tr>
<td><strong>Communication Style</strong></td>
<td>Uses HTTP verbs (GET, POST, PUT, DELETE)</td>
<td>Always POSTs structured JSON messages</td>
</tr>
<tr>
<td><strong>Focus</strong></td>
<td>CRUD operations on resources</td>
<td>Direct method/function invocation</td>
</tr>
<tr>
<td><strong>Message Structure</strong></td>
<td>Flexible JSON, no fixed schema</td>
<td>Strict: must include <code>jsonrpc</code>, <code>method</code>, <code>params</code>, <code>id</code></td>
</tr>
<tr>
<td><strong>Transport</strong></td>
<td>Usually HTTP</td>
<td>Any (HTTP, WebSocket, STDIO, SSE)</td>
</tr>
<tr>
<td><strong>Error Handling</strong></td>
<td>HTTP status codes (200, 404, 500, etc.)</td>
<td>Structured <code>error</code> object with codes and messages</td>
</tr>
<tr>
<td><strong>Overhead</strong></td>
<td>Higher (multiple endpoints, metadata)</td>
<td>Lower (single endpoint, minimal payload)</td>
</tr>
</tbody>
</table>
<p>In REST, you interact with <em>resources</em>:</p>
<div class="highlight"><pre><span></span><code><span class="err">GET /users/123</span>
<span class="err">POST /orders</span>
</code></pre></div>
<p>While in JSON-RPC, you directly call <em>methods</em>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"> </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;getUser&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">123</span><span class="p">},</span><span class="w"> </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>Both approaches achieve the same goal — remote data access — but REST feels like “navigating objects,” whereas JSON-RPC feels like “calling functions.”</p>
<details class="info">
<summary>Historical Context</summary>
<p>REST gained dominance in the 2000s with the rise of web APIs. JSON-RPC's popularity resurged later in microservice and AI ecosystems where strict structure and low latency matter more than URL-based design.</p>
</details>
<hr />
<h3 id="2-grpc-vs-json-rpc">2. gRPC vs JSON-RPC<a class="headerlink" href="#2-grpc-vs-json-rpc" title="Permanent link">&para;</a></h3>
<p><strong>gRPC</strong>, developed by Google, is another RPC-style protocol — but it’s binary, strongly typed, and built on <strong>Protocol Buffers (protobuf)</strong> instead of JSON.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>gRPC</th>
<th>JSON-RPC</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Encoding</strong></td>
<td>Binary (Protocol Buffers)</td>
<td>Text-based JSON</td>
</tr>
<tr>
<td><strong>Typing</strong></td>
<td>Strictly typed via <code>.proto</code> files</td>
<td>Dynamically typed</td>
</tr>
<tr>
<td><strong>Performance</strong></td>
<td>Very high</td>
<td>Moderate</td>
</tr>
<tr>
<td><strong>Human Readability</strong></td>
<td>Low</td>
<td>High</td>
</tr>
<tr>
<td><strong>Streaming Support</strong></td>
<td>Native bidirectional streaming</td>
<td>Achievable via SSE/WebSockets</td>
</tr>
<tr>
<td><strong>Setup Complexity</strong></td>
<td>High (requires code generation)</td>
<td>Low (plug and play)</td>
</tr>
<tr>
<td><strong>Use Cases</strong></td>
<td>Microservices, internal systems</td>
<td>Lightweight APIs, agents, AI toolchains</td>
</tr>
</tbody>
</table>
<p>JSON-RPC trades off raw speed for accessibility.<br />
You can test it in Postman, inspect it in a browser console, and extend it without recompiling clients — a huge advantage for AI experimentation and open agent frameworks.</p>
<div class="admonition note">
<p class="admonition-title">Design Insight</p>
<p>gRPC shines where performance and strict contracts matter (like backend-to-backend communication).<br />
JSON-RPC wins where flexibility, human readability, and cross-language simplicity are key.</p>
</div>
<hr />
<h3 id="3-soap-vs-json-rpc">3. SOAP vs JSON-RPC<a class="headerlink" href="#3-soap-vs-json-rpc" title="Permanent link">&para;</a></h3>
<p><strong>SOAP (Simple Object Access Protocol)</strong> predates both REST and JSON-RPC. It uses XML for encoding and includes layers like envelopes, headers, and fault objects.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>SOAP</th>
<th>JSON-RPC</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Encoding</strong></td>
<td>XML (verbose)</td>
<td>JSON (compact)</td>
</tr>
<tr>
<td><strong>Specification Size</strong></td>
<td>Heavyweight</td>
<td>Lightweight</td>
</tr>
<tr>
<td><strong>Transport</strong></td>
<td>Primarily HTTP (via XML envelopes)</td>
<td>Transport-agnostic</td>
</tr>
<tr>
<td><strong>Security</strong></td>
<td>WS-Security built-in</td>
<td>Implemented externally</td>
</tr>
<tr>
<td><strong>Ease of Use</strong></td>
<td>Complex, requires WSDL</td>
<td>Simple, schema-free</td>
</tr>
<tr>
<td><strong>Modern Usage</strong></td>
<td>Legacy enterprise systems</td>
<td>Modern microservices, AI systems</td>
</tr>
</tbody>
</table>
<p>JSON-RPC can be viewed as a <strong>minimalist descendant of SOAP</strong> — keeping the idea of structured remote calls but removing the XML verbosity and heavy specification overhead.</p>
<details class="info">
<summary>Practical Observation</summary>
<p>In most new systems, JSON-RPC replaces SOAP when teams migrate away from legacy enterprise stacks toward modern, language-agnostic ecosystems.</p>
</details>
<hr />
<h3 id="4-graphql-vs-json-rpc">4. GraphQL vs JSON-RPC<a class="headerlink" href="#4-graphql-vs-json-rpc" title="Permanent link">&para;</a></h3>
<p>GraphQL, from Facebook, is a query language for APIs.<br />
Instead of calling functions or accessing endpoints, the client specifies <strong>exactly what data</strong> it wants.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>GraphQL</th>
<th>JSON-RPC</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Paradigm</strong></td>
<td>Declarative data query</td>
<td>Imperative remote call</td>
</tr>
<tr>
<td><strong>Transport</strong></td>
<td>HTTP (POST)</td>
<td>Any (HTTP, WebSocket, STDIO)</td>
</tr>
<tr>
<td><strong>Flexibility</strong></td>
<td>Extremely flexible, client-driven</td>
<td>Method-driven, fixed interface</td>
</tr>
<tr>
<td><strong>Schema Definition</strong></td>
<td>Strongly typed (SDL)</td>
<td>Schema-free (but convention-based)</td>
</tr>
<tr>
<td><strong>Complexity</strong></td>
<td>Higher (query parsing, resolvers)</td>
<td>Simpler (direct method invocation)</td>
</tr>
</tbody>
</table>
<p>While GraphQL is excellent for data retrieval, JSON-RPC’s <strong>procedure-oriented nature</strong> makes it more suitable for <strong>function calls</strong>, <strong>tool execution</strong>, or <strong>workflow orchestration</strong> — like what happens in LLM or agentic systems.</p>
<div class="admonition note">
<p class="admonition-title">Key Distinction</p>
<p>GraphQL is for <em>asking</em> — "Give me these fields."<br />
JSON-RPC is for <em>doing</em> — "Run this function."<br />
The two can even coexist: you can call a GraphQL query engine via JSON-RPC.</p>
</div>
<hr />
<h3 id="5-when-to-choose-json-rpc">5. When to Choose JSON-RPC<a class="headerlink" href="#5-when-to-choose-json-rpc" title="Permanent link">&para;</a></h3>
<p>Choose <strong>JSON-RPC</strong> when:</p>
<ul>
<li>
<p>You need a <strong>lightweight, language-neutral RPC layer</strong>.</p>
</li>
<li>
<p>You want consistent request/response semantics.</p>
</li>
<li>
<p>Your system involves <strong>agents, tools, or AI orchestration</strong> where methods are more meaningful than REST resources.</p>
</li>
<li>
<p>You need multi-transport support (HTTP, WebSocket, STDIO).</p>
</li>
</ul>
<p>Avoid it when:</p>
<ul>
<li>
<p>Your use case is <strong>pure CRUD APIs</strong> (REST fits better).</p>
</li>
<li>
<p>You need <strong>schema enforcement and code generation</strong> (gRPC or GraphQL may be preferable).</p>
</li>
</ul>
<hr />
<h3 id="probable-doubts-clarifications_8">Probable Doubts &amp; Clarifications<a class="headerlink" href="#probable-doubts-clarifications_8" title="Permanent link">&para;</a></h3>
<p><strong>Q1.</strong> <em>If REST is an architecture and JSON-RPC a protocol, why compare them?</em><br />
<strong>A.</strong> Because both enable system-to-system communication. Developers often choose between REST or RPC paradigms for the same use case — the comparison is about <strong>design choice</strong>, not category.</p>
<p><strong>Q2.</strong> <em>Can REST and JSON-RPC coexist in one system?</em><br />
<strong>A.</strong> Absolutely. Many systems use REST for public endpoints and JSON-RPC internally between microservices or AI agents.</p>
<p><strong>Q3.</strong> <em>Is JSON-RPC faster than REST?</em><br />
<strong>A.</strong> Typically yes, because JSON-RPC has lower overhead — fewer headers, one endpoint, and smaller payloads.</p>
<p><strong>Q4.</strong> <em>Is gRPC always better for performance?</em><br />
<strong>A.</strong> In raw throughput, yes — but JSON-RPC is easier to debug, extend, and adapt across languages.</p>
<hr />
<h2 id="hands-on-topics">Hands-On Topics<a class="headerlink" href="#hands-on-topics" title="Permanent link">&para;</a></h2>
<p>This section translates the protocol into working code. We’ll build a minimal <strong>JSON-RPC server</strong> and <strong>client</strong>, then extend it with <strong>batch</strong>, <strong>notifications</strong>, <strong>error mapping</strong>, and <strong>streaming via SSE</strong>. We’ll finish with <strong>WebSocket</strong> and <strong>STDIO</strong> variants you can adapt for agent workflows.</p>
<hr />
<h3 id="1-minimal-server-fastapi-python">1) Minimal Server (FastAPI, Python)<a class="headerlink" href="#1-minimal-server-fastapi-python" title="Permanent link">&para;</a></h3>
<p>We’ll expose three methods:</p>
<ul>
<li>
<p><code>math/add(a, b)</code></p>
</li>
<li>
<p><code>math/subtract(a, b)</code></p>
</li>
<li>
<p><code>paritosh/echo(message)</code></p>
</li>
</ul>
<p><strong>Design choices:</strong></p>
<ul>
<li>
<p>Single HTTP endpoint: <code>/rpc</code></p>
</li>
<li>
<p>Static dispatch table to <strong>prevent method injection</strong></p>
</li>
<li>
<p>Strict JSON-RPC response grammar</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># app.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">Request</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">List</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uvicorn</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

<span class="c1"># --- Business methods (domain) ---</span>
<span class="k">def</span><span class="w"> </span><span class="nf">math_add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">def</span><span class="w"> </span><span class="nf">math_subtract</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>

<span class="k">def</span><span class="w"> </span><span class="nf">paritosh_echo</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;[Paritosh] </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># --- Safe dispatcher (whitelist) ---</span>
<span class="n">METHODS</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;math/add&quot;</span><span class="p">:</span> <span class="n">math_add</span><span class="p">,</span>
    <span class="s2">&quot;math/subtract&quot;</span><span class="p">:</span> <span class="n">math_subtract</span><span class="p">,</span>
    <span class="s2">&quot;paritosh/echo&quot;</span><span class="p">:</span> <span class="n">paritosh_echo</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># --- JSON-RPC helpers ---</span>
<span class="k">def</span><span class="w"> </span><span class="nf">rpc_success</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">req_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">req_id</span><span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">rpc_error</span><span class="p">(</span><span class="n">code</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">req_id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="n">err</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span> <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="n">message</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">err</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">err</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">req_id</span><span class="p">}</span>

<span class="n">INVALID_REQUEST</span> <span class="o">=</span> <span class="o">-</span><span class="mi">32600</span>
<span class="n">METHOD_NOT_FOUND</span> <span class="o">=</span> <span class="o">-</span><span class="mi">32601</span>
<span class="n">INVALID_PARAMS</span> <span class="o">=</span> <span class="o">-</span><span class="mi">32602</span>
<span class="n">INTERNAL_ERROR</span> <span class="o">=</span> <span class="o">-</span><span class="mi">32603</span>

<span class="k">def</span><span class="w"> </span><span class="nf">call_method</span><span class="p">(</span><span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
    <span class="c1"># Support both positional and named params</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">METHODS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">fn</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;Method not found&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">params</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">or</span> <span class="n">params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">params</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid params&quot;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/rpc&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">rpc_endpoint</span><span class="p">(</span><span class="n">req</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="k">await</span> <span class="n">req</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="c1"># Malformed JSON; id unknown</span>
        <span class="k">return</span> <span class="n">rpc_error</span><span class="p">(</span><span class="n">INVALID_REQUEST</span><span class="p">,</span> <span class="s2">&quot;Invalid Request&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># Batch vs single</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">responses</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">payload</span><span class="p">:</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="n">handle_single</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># notifications (no id) produce no response</span>
                <span class="n">responses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">responses</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">handle_single</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_single</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
    <span class="c1"># Validate envelope</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">or</span> <span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;2.0&quot;</span> <span class="ow">or</span> <span class="s2">&quot;method&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">rpc_error</span><span class="p">(</span><span class="n">INVALID_REQUEST</span><span class="p">,</span> <span class="s2">&quot;Invalid Request&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

    <span class="n">req_id</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">method</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;method&quot;</span><span class="p">)</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;params&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># Notification: no id -&gt; no response</span>
    <span class="n">is_notification</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">call_method</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_notification</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">rpc_success</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">req_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_notification</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">rpc_error</span><span class="p">(</span><span class="n">METHOD_NOT_FOUND</span><span class="p">,</span> <span class="s2">&quot;Method not found&quot;</span><span class="p">,</span> <span class="n">req_id</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">})</span>
    <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">te</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_notification</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">rpc_error</span><span class="p">(</span><span class="n">INVALID_PARAMS</span><span class="p">,</span> <span class="s2">&quot;Invalid params&quot;</span><span class="p">,</span> <span class="n">req_id</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">te</span><span class="p">)})</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_notification</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">rpc_error</span><span class="p">(</span><span class="n">INTERNAL_ERROR</span><span class="p">,</span> <span class="s2">&quot;Internal Error&quot;</span><span class="p">,</span> <span class="n">req_id</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)})</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">uvicorn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
</code></pre></div>
<p><strong>What’s happening (before/after):</strong></p>
<ul>
<li>
<p><strong>Before:</strong> We map JSON-RPC message → <code>method</code>, <code>params</code>, <code>id</code>.</p>
</li>
<li>
<p><strong>After:</strong> We return either <code>result</code> or <code>error</code> with the same <code>id</code>. Notifications (<code>no id</code>) yield <strong>no response</strong>.</p>
</li>
</ul>
<hr />
<h3 id="2-minimal-client-python">2) Minimal Client (Python)<a class="headerlink" href="#2-minimal-client-python" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># client.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>

<span class="k">def</span><span class="w"> </span><span class="nf">rpc_call</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">}</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">r</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">URL</span> <span class="o">=</span> <span class="s2">&quot;http://127.0.0.1:8000/rpc&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">rpc_call</span><span class="p">(</span><span class="n">URL</span><span class="p">,</span> <span class="s2">&quot;math/add&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="nb">id</span><span class="o">=</span><span class="mi">101</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rpc_call</span><span class="p">(</span><span class="n">URL</span><span class="p">,</span> <span class="s2">&quot;paritosh/echo&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;ready for JSON-RPC&quot;</span><span class="p">},</span> <span class="nb">id</span><span class="o">=</span><span class="mi">102</span><span class="p">))</span>
</code></pre></div>
<p><strong>Expected:</strong></p>
<ul>
<li>
<p><code>{ "jsonrpc":"2.0", "result": 5, "id": 101 }</code></p>
</li>
<li>
<p><code>{ "jsonrpc":"2.0", "result": "[Paritosh] ready for JSON-RPC", "id": 102 }</code></p>
</li>
</ul>
<hr />
<h3 id="3-batch-and-notifications">3) Batch and Notifications<a class="headerlink" href="#3-batch-and-notifications" title="Permanent link">&para;</a></h3>
<p><strong>Batch (client side):</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>

<span class="n">URL</span> <span class="o">=</span> <span class="s2">&quot;http://127.0.0.1:8000/rpc&quot;</span>
<span class="n">batch</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;math/add&quot;</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">201</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;math/subtract&quot;</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">202</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;paritosh/echo&quot;</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;log this&quot;</span><span class="p">}}</span>  <span class="c1"># notification</span>
<span class="p">]</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">URL</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">batch</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
</code></pre></div>
<p><strong>Notes:</strong></p>
<ul>
<li>
<p>Responses return as an <strong>array</strong>.</p>
</li>
<li>
<p>The notification has <strong>no</strong> response object (by spec).</p>
</li>
</ul>
<hr />
<h3 id="4-structured-error-mapping-llm-example">4) Structured Error Mapping (LLM Example)<a class="headerlink" href="#4-structured-error-mapping-llm-example" title="Permanent link">&para;</a></h3>
<p>If you later wrap an LLM call:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ai_generate</span><span class="p">(</span><span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="c1"># pseudo-code; replace with your LLM</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4000</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Prompt too long&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;Generated text...&quot;</span>

<span class="n">METHODS</span><span class="p">[</span><span class="s2">&quot;ai/generate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ai_generate</span>
</code></pre></div>
<p>A long prompt raises <code>ValueError</code>, which our server maps to:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">-32602</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Invalid params&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;details&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Prompt too long&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">301</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h3 id="5-streaming-with-sse-server">5) Streaming with SSE (Server)<a class="headerlink" href="#5-streaming-with-sse-server" title="Permanent link">&para;</a></h3>
<p>SSE sends <strong>incremental chunks</strong> as the result is produced. We’ll stream token-like pieces for <code>paritosh/stream</code>.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># sse.py (mount alongside FastAPI app)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">Request</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.responses</span><span class="w"> </span><span class="kn">import</span> <span class="n">StreamingResponse</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/rpc/stream&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">rpc_stream</span><span class="p">(</span><span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
    <span class="c1"># A toy method: stream characters as &quot;tokens&quot;</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">event_generator</span><span class="p">():</span>
        <span class="c1"># First, announce start (optional)</span>
        <span class="k">yield</span> <span class="sa">f</span><span class="s2">&quot;data: </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;jsonrpc&#39;</span><span class="p">:</span><span class="s1">&#39;2.0&#39;</span><span class="p">,</span><span class="s1">&#39;result&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="w"> </span><span class="nb">id</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;event&#39;</span><span class="p">:</span><span class="s1">&#39;start&#39;</span><span class="p">})</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">message</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>  <span class="c1"># simulate latency</span>
            <span class="k">yield</span> <span class="sa">f</span><span class="s2">&quot;data: </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;jsonrpc&#39;</span><span class="p">:</span><span class="s1">&#39;2.0&#39;</span><span class="p">,</span><span class="s1">&#39;result&#39;</span><span class="p">:</span><span class="w"> </span><span class="n">ch</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="w"> </span><span class="nb">id</span><span class="p">})</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="k">yield</span> <span class="s2">&quot;data: [DONE]</span><span class="se">\n\n</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="n">StreamingResponse</span><span class="p">(</span><span class="n">event_generator</span><span class="p">(),</span> <span class="n">media_type</span><span class="o">=</span><span class="s2">&quot;text/event-stream&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Client (browser or Python <code>sseclient</code>)</strong> receives a sequence of <code>data:</code> lines until <code>[DONE]</code>.</p>
<div class="admonition note">
<p class="admonition-title">Spec Awareness</p>
<p>JSON-RPC core doesn't define streaming, but SSE preserves the <strong>message grammar</strong> per chunk. This is common in LLM UIs.</p>
</div>
<hr />
<h3 id="6-websocket-variant-bi-directional">6) WebSocket Variant (Bi-Directional)<a class="headerlink" href="#6-websocket-variant-bi-directional" title="Permanent link">&para;</a></h3>
<p>When either side may initiate calls (agent ↔ agent), use WebSockets.</p>
<p><strong>Server (FastAPI + websockets)</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># ws.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">WebSocket</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">websocket</span><span class="p">(</span><span class="s2">&quot;/rpc/ws&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">rpc_ws</span><span class="p">(</span><span class="n">ws</span><span class="p">:</span> <span class="n">WebSocket</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">ws</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">raw</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ws</span><span class="o">.</span><span class="n">receive_text</span><span class="p">()</span>
            <span class="n">req</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
            <span class="c1"># Minimal echo behavior for demo</span>
            <span class="k">if</span> <span class="n">req</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;2.0&quot;</span> <span class="ow">and</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">req</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">ws</span><span class="o">.</span><span class="n">send_text</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;echo&quot;</span><span class="p">:</span> <span class="n">req</span><span class="p">},</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">req</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]}))</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">ws</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<p><strong>Client (Node.js)</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// ws_client.js</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">WebSocket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;ws&quot;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">ws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WebSocket</span><span class="p">(</span><span class="s2">&quot;ws://127.0.0.1:8000/rpc/ws&quot;</span><span class="p">);</span>

<span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;open&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">jsonrpc</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;paritosh/echo&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">params</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;hi&quot;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">901</span><span class="w"> </span><span class="p">};</span>
<span class="w">  </span><span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">ws</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;WS Response:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
<span class="p">});</span>
</code></pre></div>
<hr />
<h3 id="7-stdio-local-tool-skeleton">7) STDIO (Local Tool) Skeleton<a class="headerlink" href="#7-stdio-local-tool-skeleton" title="Permanent link">&para;</a></h3>
<p>For <strong>agent-to-tool</strong> invocation on the same machine.</p>
<p><strong>Server (reads from stdin, writes to stdout):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># stdio_server.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span><span class="o">,</span><span class="w"> </span><span class="nn">json</span>

<span class="k">def</span><span class="w"> </span><span class="nf">handle</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">req</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;method&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;paritosh/echo&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;[Paritosh] </span><span class="si">{</span><span class="n">req</span><span class="p">[</span><span class="s1">&#39;params&#39;</span><span class="p">][</span><span class="s1">&#39;message&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">req</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)}</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;error&quot;</span><span class="p">:{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="o">-</span><span class="mi">32601</span><span class="p">,</span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;Method not found&quot;</span><span class="p">},</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">req</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)}</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">:</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">handle</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;error&quot;</span><span class="p">:{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span><span class="o">-</span><span class="mi">32600</span><span class="p">,</span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;Invalid Request&quot;</span><span class="p">},</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="kc">None</span><span class="p">})</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</code></pre></div>
<p><strong>Client (writes JSON to stdin):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># stdio_client.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span><span class="o">,</span><span class="w"> </span><span class="nn">json</span>

<span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;stdio_server.py&quot;</span><span class="p">],</span>
    <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="n">req</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span><span class="s2">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;paritosh/echo&quot;</span><span class="p">,</span><span class="s2">&quot;params&quot;</span><span class="p">:{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;local call&quot;</span><span class="p">},</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">777</span><span class="p">}</span>
<span class="n">proc</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">req</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">proc</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">proc</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
<span class="n">proc</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
</code></pre></div>
<hr />
<h3 id="8-observability-essentials">8) Observability Essentials<a class="headerlink" href="#8-observability-essentials" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Log <strong>raw request/response</strong> JSON for each call.</p>
</li>
<li>
<p>Tag logs with <code>id</code>, <code>method</code>, latency.</p>
</li>
<li>
<p>In batches, log an entry per sub-request.</p>
</li>
<li>
<p>Integrate with <strong>OpenTelemetry / Jaeger / LangFuse</strong> to trace multi-agent chains.</p>
</li>
</ul>
<hr />
<h3 id="9-exercises">9) Exercises<a class="headerlink" href="#9-exercises" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Add <code>math/multiply</code></strong> and support both positional and named params.</p>
</li>
<li>
<p><strong>Create a custom error</strong> in the <code>-32000..-32099</code> range for validation failures (e.g., negative inputs).</p>
</li>
<li>
<p><strong>Implement a batch client</strong> that fires 10 concurrent calls and collates results by <code>id</code>.</p>
</li>
<li>
<p><strong>Add SSE streaming</strong> to return incremental sums for <code>math/add_stream(a, b)</code> counting from 0 to result.</p>
</li>
<li>
<p><strong>Convert HTTP to WebSocket</strong> for <code>paritosh/echo</code> so the server can also <strong>push</strong> periodic <code>onTick</code> notifications to the client.</p>
</li>
</ol>
<hr />
<h3 id="probable-doubts-clarifications_9">Probable Doubts &amp; Clarifications<a class="headerlink" href="#probable-doubts-clarifications_9" title="Permanent link">&para;</a></h3>
<p><strong>Q1.</strong> How do I test notifications if there’s no response?<br />
<strong>A.</strong> Inspect server logs or persist side effects (e.g., write to a file). In integration tests, verify the side effect rather than a response.</p>
<p><strong>Q2.</strong> Can I mix SSE and standard JSON-RPC in the same app?<br />
<strong>A.</strong> Yes. Use <code>/rpc</code> for standard calls and <code>/rpc/stream</code> for long-running or tokenized outputs.</p>
<p><strong>Q3.</strong> How do I keep the server safe from arbitrary method names?<br />
<strong>A.</strong> Always dispatch through a <strong>whitelist table</strong>. Never <code>eval</code> or dynamic-import from user input.</p>
<p><strong>Q4.</strong> What if batch contains an empty array?<br />
<strong>A.</strong> Return <code>-32600 Invalid Request</code> as per spec.</p>
<hr />
<h2 id="recap-key-takeaways">Recap &amp; Key Takeaways<a class="headerlink" href="#recap-key-takeaways" title="Permanent link">&para;</a></h2>
<p>JSON-RPC 2.0 is one of those elegant engineering standards that manages to be both <strong>minimal and complete</strong>. In essence, it defines a universal way for two systems to talk by exchanging <strong>structured JSON messages</strong> that represent method calls and results — no assumptions about transport, programming language, or operating system. This strict yet simple grammar (<code>jsonrpc</code>, <code>method</code>, <code>params</code>, <code>id</code>) eliminates ambiguity, allowing any compliant client and server to interoperate with deterministic precision.</p>
<hr />
<h3 id="json-rpc-20-in-one-paragraph">JSON-RPC 2.0 in One Paragraph<a class="headerlink" href="#json-rpc-20-in-one-paragraph" title="Permanent link">&para;</a></h3>
<p>At its core, JSON-RPC 2.0 is a <strong>transport-neutral protocol</strong> for remote procedure calls encoded in JSON. A client sends a <code>method</code> name, input <code>params</code>, and an <code>id</code>; the server returns either a <code>result</code> or an <code>error</code> tied to the same <code>id</code>. It supports <strong>notifications</strong> (no response expected), <strong>batching</strong> (multiple calls at once), and <strong>structured error handling</strong> for reliability. By remaining stateless, lightweight, and language-agnostic, it serves as a clean foundation for both small automation scripts and complex distributed systems.</p>
<hr />
<h3 id="why-its-simplicity-makes-it-ideal-for-agentic-ai-and-mcp">Why Its Simplicity Makes It Ideal for Agentic AI and MCP<a class="headerlink" href="#why-its-simplicity-makes-it-ideal-for-agentic-ai-and-mcp" title="Permanent link">&para;</a></h3>
<p>Large, distributed AI systems—especially <strong>agentic architectures</strong>—require a predictable, low-overhead communication format. JSON-RPC fits perfectly because:</p>
<ol>
<li>
<p><strong>Deterministic grammar:</strong> Agents, tools, and models know exactly how to interpret calls and results.</p>
</li>
<li>
<p><strong>Stateless requests:</strong> Multiple agents can operate concurrently without sharing session context.</p>
</li>
<li>
<p><strong>Error structure:</strong> Machine-readable error codes simplify automatic retries, fallbacks, and recovery.</p>
</li>
<li>
<p><strong>Transport flexibility:</strong> Works seamlessly across HTTP, WebSockets, or local STDIO (as used by MCP).</p>
</li>
<li>
<p><strong>Human readability:</strong> Developers can inspect and debug messages without decoding binary payloads.</p>
</li>
</ol>
<p>In the <strong>Model Context Protocol (MCP)</strong>, this simplicity is not a limitation—it’s a strength. Each agent, resource, or prompt uses JSON-RPC as its <em>message grammar</em>, ensuring composability between independent tools. Whether two agents communicate locally over STDIO or remotely via WebSocket, their semantics remain identical.</p>
<details class="info">
<summary>Analogy for AI Engineers</summary>
<p>Think of JSON-RPC as the <strong>lingua franca of agents</strong>—the grammar they all agree on.<br />
MCP, LangGraph, and other frameworks build on this by defining <em>what</em> messages mean, but JSON-RPC defines <em>how</em> they're spoken.</p>
</details>
<hr />
<h3 id="preview-of-part-2-json-rpc-in-mcp-and-agent-to-agent-communication">Preview of Part 2 — JSON-RPC in MCP and Agent-to-Agent Communication<a class="headerlink" href="#preview-of-part-2-json-rpc-in-mcp-and-agent-to-agent-communication" title="Permanent link">&para;</a></h3>
<p>In <strong>Part 2</strong>, we’ll step beyond the protocol itself and see how JSON-RPC becomes the backbone of the <strong>Model Context Protocol (MCP)</strong>—a framework that allows LLMs, tools, and agents to communicate like modular services.</p>
<p>We’ll cover:</p>
<ul>
<li>
<p><strong>MCP Primitives on JSON-RPC</strong> — <code>tools/list</code>, <code>tools/call</code>, <code>resources/read</code>, <code>prompts/get</code>.</p>
</li>
<li>
<p><strong>Bi-Directional RPC</strong> — enabling agents to both call and be called.</p>
</li>
<li>
<p><strong>Streaming Responses via SSE</strong> — token-level updates from LLMs.</p>
</li>
<li>
<p><strong>Access Control and Security</strong> — controlling inter-agent visibility and trust.</p>
</li>
<li>
<p><strong>Hands-On Exercises</strong> — building your own MCP-compatible tool server.</p>
</li>
</ul>
<p>By the end of the next part, you’ll understand not just <em>what JSON-RPC is</em>, but <em>how it powers the nervous system of agentic AI systems</em>—turning simple method calls into structured, reliable, and secure conversations between intelligent components.</p>
<hr />












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../JavaScript/06.%20Higher%20Order%20Loops%20and%20Array%20Iteration/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Higher Order Loops">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Higher Order Loops
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Paritosh Sharma
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.code.annotate", "content.tabs.link", "content.tooltips", "content.math", "search.highlight", "search.share", "navigation.top", "navigation.footer", "navigation.tracking", "navigation.sections", "navigation.tabs", "navigation.path", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../assets/collapsible-toc.js"></script>
      
    
  </body>
</html>